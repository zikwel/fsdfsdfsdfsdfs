(self.webpackChunkvk=self.webpackChunkvk||[]).push([[2897],{72900:function(e,n,i){"use strict";i(10721);var t,r=i(97170),o=i(79573),a=i(14633),l=i(67866),s=i(49846),u=i(19331),d=i(41206),v=i(9509),c=function(e,n){var i=e.originalException;return"string"==typeof i?i:null==i?void 0:i[n]},f=function(e,n){var i,t,r=(null===(t=null===(i=e.exception)||void 0===i?void 0:i.values)||void 0===t?void 0:t[0])||{},o=r.type,a=r.value;return n&&c(n,"message")||[o,a].join(" ")},_=function(e,n){return n&&c(n,"stack")||function(e){var n,i;return null===(i=null===(n=e.exception)||void 0===n?void 0:n.values)||void 0===i?void 0:i.map((function(e){var n,i=e.stacktrace;return null===(n=null==i?void 0:i.frames)||void 0===n?void 0:n.map((function(e){return e.filename}))})).join()}(e)},p=function(){var e,n;return(null===(n=null===(e=null===window||void 0===window?void 0:window.vk)||void 0===e?void 0:e.statsMeta)||void 0===n?void 0:n.st)?"staging":"production"},g=function(e){var n,i,t=null==e?void 0:e.originalException;return!(!t||"mvk"!==(null===(i=null===(n=null===window||void 0===window?void 0:window.vk)||void 0===n?void 0:n.statsMeta)||void 0===i?void 0:i.platform))&&("string"==typeof t?t:String(null==t?void 0:t.message)).toLowerCase().includes("serviceworker")},m=function(e){var n,i,t;if(e)try{for(var r=(0,o.__values)(Object.entries(v.moduleDetectionConfig.includes)),a=r.next();!a.done;a=r.next()){var l=(0,o.__read)(a.value,2),s=l[0],u=l[1];if(e.includes(u)){t=s;break}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return t};!function(e){e.Fatal="fatal",e.Warning="warning"}(t||(t={}));var w=function(){function e(){this.name=e.id,this.lastSentErrors=new Set,this.maxLastSentErrors=10}return e.getFrames=function(e){var n,i,t,r;return null===(r=null===(t=null===(i=null===(n=e.exception)||void 0===n?void 0:n.values)||void 0===i?void 0:i[0])||void 0===t?void 0:t.stacktrace)||void 0===r?void 0:r.frames},e.getLastFrame=function(n){var i;return null===(i=e.getFrames(n))||void 0===i?void 0:i.slice(-1).pop()},e.onLocalWindows=function(e){var n;return/^file:\/\/\/[A-Z]:(\\|\/)/.test((null===(n=null==e?void 0:e.request)||void 0===n?void 0:n.url)||"")},e.inAnonymousFilename=function(e){return e===v.anonymousName},e.inNativeCode=function(e){return e===v.nativeCode},e.prototype.inExtension=function(n){var i;return null===(i=e.getFrames(n))||void 0===i?void 0:i.some((function(e){return v.extensionPrefixes.some((function(n){var i;return null===(i=e.filename)||void 0===i?void 0:i.startsWith(n)}))}))},e.prototype.alreadySent=function(e,n){var i=[f(e,n),_(e,n)].join("_");return this.lastSentErrors.size>this.maxLastSentErrors&&this.lastSentErrors.clear(),!!this.lastSentErrors.has(i)||(this.lastSentErrors.add(i),!1)},e.prototype.findAllPredicates=function(n,i){var t=e.getLastFrame(n),r={inExtension:this.inExtension(n),isServiceWorker:g(i),inAnonymousFilename:!1,inNativeCode:!1,onLocalWindows:e.onLocalWindows(n),withoutFrames:!e.getFrames(n)};return t&&(r.inAnonymousFilename=e.inAnonymousFilename(null==t?void 0:t.filename),r.inNativeCode=e.inNativeCode(null==t?void 0:t.filename)),r},e.prototype.setupOnce=function(n,i){var r=this;n((function(n,o){var a,l;if(i().getIntegration(e)){var s=r.findAllPredicates(n,o),u=[s.inExtension,s.isServiceWorker,s.inAnonymousFilename,s.inNativeCode,s.withoutFrames].some(Boolean),d=[u].some(Boolean);return[s.onLocalWindows].some(Boolean)?null:((null===(l=null===(a=n.exception)||void 0===a?void 0:a.values)||void 0===l?void 0:l[0])&&s.inExtension&&(n.exception.values[0].type=v.CustomSentryErrorTypes.ERROR_OF_EXTENSION),d&&(n.level=t.Warning),u&&r.alreadySent(n,o)?null:n)}return n}))},e.id="BadScripts",e}(),y=i(61540),E=function(){function e(n){this.getModuleFallback=n,this.name=e.id}return e.isExternalService=function(e){return e&&e.startsWith("http")&&!y.VK_URL_REGEX_STRICT.test(e)},e.detectModuleInSentryEvent=function(n,i){var t=_(n,i);return g(i)?"service_worker":e.isExternalService(t)?"external":function(e){var n,i,t,r,a;if(e&&Array.isArray(e.frames)){var l=e.frames.reverse();try{for(var s=(0,o.__values)(Object.entries(v.moduleDetectionConfig.some)),u=s.next();!u.done;u=s.next()){var d=(0,o.__read)(u.value,2),c=d[0];if((0,d[1])(l)){a=c;break}}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}if(!a)try{for(var f=(0,o.__values)(l),_=f.next();!_.done;_=f.next()){var p=_.value,g=m(p.filename);if(g){a=g;break}}}catch(e){t={error:e}}finally{try{_&&!_.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}}return a}(n.stacktrace)||m(t)},e.prototype.setupOnce=function(n,i){var t=this;n((function(n,r){if(i().getIntegration(e)){if(null==n?void 0:n.tags){var o=v.PROTECTED_MODULE_NAME_TAG;n.tags[o]||(n.tags.module=e.detectModuleInSentryEvent(n,r)||t.getModuleFallback()),n.tags.hasOwnProperty(o)&&delete n.tags[o]}return n}return n}))},e.id="ModuleDetect",e}(),h=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(n,i){n((function(n){var t=i().getIntegration(e);return t?t.process(n):n}))},e.prototype.process=function(e){var n,i=e;return Array.isArray(null===(n=null==e?void 0:e.exception)||void 0===n?void 0:n.values)&&(i=this._processExceptionsEvent(i)),e.stacktrace&&(i=this._processStacktraceEvent(i)),i},e.isSentryFrame=function(e){var n=e.filename;return["web/sentry","mobile/vendor~sentry"].some((function(e){return null==n?void 0:n.includes("/dist/"+e+".")}))},e.isRavenFrame=function(e){var n=e.filename;return["web/raven_logger","mobile/vendor~raven"].some((function(e){return null==n?void 0:n.includes("/dist/"+e+".")}))},e.iteratee=function(n){return[e.isSentryFrame,e.isRavenFrame].some((function(e){return e(n)}))?void 0:n},e.prototype._processExceptionsEvent=function(e){var n=this;try{return(0,o.__assign)((0,o.__assign)({},e),{exception:(0,o.__assign)((0,o.__assign)({},e.exception),{values:e.exception.values.map((function(e){return(0,o.__assign)((0,o.__assign)({},e),{stacktrace:n._processStacktrace(e.stacktrace)})}))})})}catch(n){return e}},e.prototype._processStacktraceEvent=function(e){try{return(0,o.__assign)((0,o.__assign)({},e),{stacktrace:this._processStacktrace(e.stacktrace)})}catch(n){return e}},e.prototype._processStacktrace=function(n){var i;return(0,o.__assign)((0,o.__assign)({},n),{frames:null===(i=null==n?void 0:n.frames)||void 0===i?void 0:i.reduce((function(n,i){var t=e.iteratee(i);return t?(0,o.__spreadArray)((0,o.__spreadArray)([],(0,o.__read)(n||[]),!1),[t],!1):n}),void 0)})},e.id="FramesSanitizer",e}(),S=function(){function e(n){this.getKnownIssues=n,this.name=e.id}return e.prototype.isWellKnown=function(e){var n=Object.entries(this.getKnownIssues(e)||{});return!!n.length&&n.reduce((function(e,n){var i=(0,o.__read)(n,2),t=i[0],r=i[1];return(null==r?void 0:r.every(Boolean))?parseFloat(t):e}),!1)},e.prototype.setupOnce=function(n,i){var r=this;n((function(n){var o,a;if(i().getIntegration(e)){var l=r.isWellKnown(n);if(l){if(!(0,u.randEnabled)(l))return null;if(null===(a=null===(o=n.exception)||void 0===o?void 0:o.values)||void 0===a?void 0:a[0]){var s=n.exception.values[0],d=s.type,c=s.value;n.level=t.Warning,n.exception.values[0].type=v.CustomSentryErrorTypes.KNOWN_ISSUE,n.exception.values[0].value=d+": "+c,n.fingerprint=["{{ default }}","{{ type }}"]}}}return n}))},e.id="KnownIssues",e}(),k=s.navigationStat.getModule,x=i(49265);!function(e){var n,i,t=e.dsn,r=e.moduleChangeListener,c=e.peKeyOfVerboseMode,f=e.ignoreErrors,_=e.initialScope,g=e.integrations,m=(0,o.__rest)(e,["dsn","moduleChangeListener","peKeyOfVerboseMode","ignoreErrors","initialScope","integrations"]),y=null===(n=null===window||void 0===window?void 0:window.vk)||void 0===n?void 0:n.rv,S=null===(i=null===window||void 0===window?void 0:window.vk)||void 0===i?void 0:i.id;if(!t||window.__SENTRY_INITIALIZED__)return!1;window.__SENTRY_INITIALIZED__="initializing",l.init((0,o.__assign)({release:y,dsn:"https://"+t[0]+"@stacks.vk-portal.net/"+t[1],ignoreErrors:v.commonIgnoreErrors.concat(f||[]),sampleRate:1,maxBreadcrumbs:function(){var e,n;return(null===(n=null===(e=null===window||void 0===window?void 0:window.vk)||void 0===e?void 0:e.statsMeta)||void 0===n?void 0:n.st)&&(0,u.partConfigEnabled)(c)}()?3:1,autoSessionTracking:!y||!r,environment:p(),integrations:(0,o.__spreadArray)((0,o.__spreadArray)((0,o.__spreadArray)([],(0,o.__read)((0,u.partConfigEnabled)("sentry_js_sanitize_frames")?[new h]:[]),!1),[new w,new E(k)],!1),(0,o.__read)(g||[]),!1),initialScope:(0,o.__assign)({tags:(0,o.__assign)((0,o.__assign)({},(null==_?void 0:_.tags)||{}),{is_logged_in:Boolean(S),module:k()})},S?{user:{id:String(S)}}:{})},m)),function(e){"function"==typeof e&&l.onLoad((function(){return e((function(){return d.setTag("module",s.navigationStat.getModule())}))}))}(r),window.Sentry=a,window.__SENTRY_INITIALIZED__=!0}({dsn:["d444a168ca9f436d854283b4eb3fb0b2",27],peKeyOfVerboseMode:"sentry_js_mvk_verbose",ignoreErrors:["отменено","Failed to fetch","NetworkError when attempting to fetch resource.","Cancelled","Network request failed","NetworkError",/^Loading chunk(?:.*)failed/i],moduleChangeListener:r.default.onChanged,initialScope:{tags:{web_view:Boolean(null===window||void 0===window?void 0:window.isArticleWebView)}},integrations:(null===window||void 0===window?void 0:window.vk)&&(0,u.partConfigEnabled)("sentry_js_known_issues_mvk_integration")?[new S((function(e){var n,i,t,r,a,l,s,u,d,c,f,_,p,g=(null===(i=null===(n=null==e?void 0:e.exception)||void 0===n?void 0:n.values)||void 0===i?void 0:i[0])||{},m=g.type,w=g.value,E=g.mechanism,h=(g.stacktrace||{}).frames,S=String(null===(t=null==e?void 0:e.tags)||void 0===t?void 0:t.module),k={.06:["An event processor returned null, will not send event."===w],.075:[null===(r=x.default.android_version)||void 0===r?void 0:r.startsWith("4."),"INVALID_STATE_ERR: INVALID_STATE_ERR: DOM Exception 11"===(null==e?void 0:e.message)],.125:[x.default.safari_mobile,m===v.Error,w==="SecurityError: Script https://m."+(0,y.getHostName)()+"/js/sw.js load failed","onunhandledrejection"===(null==E?void 0:E.type),!h,"login"===S],.025:[x.default.chrome,!h,"Error"===m,w&&w.endsWith("The document is in an invalid state.")&&(w.startsWith("InvalidStateError: Failed to register a ServiceWorker")||w.startsWith("InvalidStateError: Failed to get a ServiceWorkerRegistration")),"service_worker"===S]};return Array.isArray(h)&&(k=(0,o.__assign)((0,o.__assign)({},k),{.05:[x.default.mac,x.default.safari,"10.1.1"===x.default.version,m===v.TypeError,null==w?void 0:w.includes("e.data[0].reduce"),"onunhandledrejection"===(null==E?void 0:E.type),"promiseReactionJob"===(null===(a=h[0])||void 0===a?void 0:a.function),(null===(l=h[0])||void 0===l?void 0:l.filename)===v.nativeCode,["audio","login"].includes(S)],.1:[x.default.android,m===v.SyntaxError,null==w?void 0:w.includes("Invalid or unexpected token"),"onerror"===(null==E?void 0:E.type),1===(null==h?void 0:h.length),1===(null===(s=h[0])||void 0===s?void 0:s.lineno),33===(null===(u=h[0])||void 0===u?void 0:u.colno),"profile"===S],.15:[x.default.mac,x.default.safari,"10.1.1"===x.default.version,"Can't find variable: pauseAudio"===w,"ReferenceError"===m,["audio","login","unknown"].includes(S)],.2:[x.default.mac,x.default.safari,"10.1.1"===x.default.version,!(null===(d=null==e?void 0:e.tags)||void 0===d?void 0:d.is_logged_in),m===v.TypeError,null==w?void 0:w.includes("r[8].split"),"onunhandledrejection"===(null==E?void 0:E.type),"promiseReactionJob"===(null===(c=h[0])||void 0===c?void 0:c.function),(null===(f=h[0])||void 0===f?void 0:f.filename)===v.nativeCode,"reduce"===(null===(_=h[1])||void 0===_?void 0:_.function),(null===(p=h[1])||void 0===p?void 0:p.filename)===v.nativeCode,"audio"===S]})),k}))]:void 0})}},function(e){"use strict";e.O(0,[4736,3434,4578,1777,5456,5790,3898,5411,6855,6199,490,410,6444,8592,7219,6429],(function(){return n=72900,e(e.s=n);var n}));e.O()}]);