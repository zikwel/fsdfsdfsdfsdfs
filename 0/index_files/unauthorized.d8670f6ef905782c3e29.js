(self.webpackChunkvk=self.webpackChunkvk||[]).push([[1357],{85677:function(n,t,e){"use strict";e.d(t,{UnauthorizedActionModal:function(){return d}});var i=e(62641),o=e(85703),a=e(81294),r=e(52822),c=e(36461),u=e(40684),l=e(4726);function d(n){void 0===n&&(n={});var t,e=n.loginUrl||"/login",d=n.joinUrl||"/join",s=n.showOpenInApp,_=n.openInAppUrl,p={more:{title:(0,i.getLang)("mobile_unauthorized_action_more_title"),description:(0,i.getLang)("mobile_unauthorized_action_more_description")},like:{title:(0,i.getLang)("mobile_unauthorized_action_like_title"),description:(0,i.getLang)("mobile_unauthorized_action_like_description")},share:{title:(0,i.getLang)("mobile_unauthorized_action_share_title"),description:(0,i.getLang)("mobile_unauthorized_action_share_description")}};t=n.title||n.description?{title:n.title,description:n.description}:p[n.type];var g,h=n.iconType,f=n.iconUrl;if(h||(h="like"===n.type?"like":"share"===n.type?"share":"vk"),f)g=(0,l.Avatar)({size:72,src:f,borderRadius:"full"});else switch(h){case"vk":g=(0,c.Icon56LogoVk)();break;case"like":g=(0,c.Icon56LikeOutline)();break;case"share":g=(0,c.Icon56ShareOutline)();break;case"photo":g=(0,c.Icon56GalleryOutline)();break;case"video":g=(0,c.Icon56VideoOutline)();break;case"music":g=(0,c.Icon56MusicOutline)();break;case"add_user":g=(0,c.Icon56UserAddOutline)();break;case"community":g=(0,r.default)({icon:(0,u.getUsers3Outline56Icon)()});break;case"message":g=(0,c.Icon56MessageOutline)()}var v="modal_"+n.type||0;n.isCTA&&(v="cta");var k,w=n.isUnauthorizedFeed,m=null,U=null;if(n.onLoginClick?m=n.onLoginClick:w&&(m="UnauthorizedFeed.onActionClick(event)"),n.onJoinClick?U=n.onJoinClick:w&&(m="UnauthorizedFeed.onActionClick(event)"),s){var A=""+(0,i.getLang)("unauthorized_box_sign_in_or_sign_up");A=(0,i.langTag)('<a class="UnauthorizedActionModal__signInTextLink" href="'+e+'">',"</a>",A,"link_sign_in"),A=(0,i.langTag)('<a class="UnauthorizedActionModal__signUpTextLink" href="'+d+'">',"</a>",A,"link_sign_up"),k={inner:[(0,a.default)({inner:[(0,i.getLang)("mobile_open_in_native_app_float_btn")],class:"UnauthorizedActionModal__openInAppButton",url:_,use_native_onclick:!0,stretch:!0,theme:"regular",size:"large"}),{inner:[Wd.wrap(A)],class:"UnauthorizedActionModal__openInAppFooterText",tag:"div"}],class:"UnauthorizedActionModal__openInAppFooter",tag:"div"}}else k=(0,o.BtnStack)({inner:[(0,a.default)({inner:[(0,i.getLang)("mobile_unauthorized_login")],url:e,onClick:m,attrs:{"data-type":"login","data-from":""+v},use_native_onclick:!0,stretch:!0,theme:"regular",size:"large"}),(0,a.default)({inner:[(0,i.getLang)("mobile_unauthorized_join")],url:d,onClick:U,attrs:{"data-type":"join","data-from":""+v},use_native_onclick:!0,stretch:!0,theme:"positive",size:"large"})],mode:"vertical"});return{inner:[{inner:[{inner:[g],class:"UnauthorizedActionModal__icon",tag:"div"},{inner:[t.title],class:"UnauthorizedActionModal__title",tag:"div"},{inner:[t.description],class:"UnauthorizedActionModal__description",tag:"div"},k],class:"UnauthorizedActionModal__in",tag:"div"}],class:(0,i.classNames)("UnauthorizedActionModal","UnauthorizedActionModal--"+n.type,n.className),tag:"div"}}},64896:function(n,t,e){"use strict";var i=e(97349);window.Unauthorized2=i.Unauthorized},97349:function(n,t,e){"use strict";e.d(t,{Unauthorized:function(){return h},getOpenInAppMyTrackerUrl:function(){return f}});var i=e(85677),o=e(9223),a=e(39871),r=e(40517),c=e(79654),u=e(71437),l=e(76567);function d(n,t){if(s(),n){var e=function(t){c.marketingTransitionItemStat.logEvent(r.MarketingTransitionItemCampaignType.UNAUTH_ACTION_BOX,t,n.unauth_action_box.action,window.location.href)},l=(0,i.UnauthorizedActionModal)({type:n.unauth_action_box.action,iconType:n.unauth_action_box.icon_type,iconUrl:n.unauth_action_box.icon_url,title:n.unauth_action_box.header,description:n.unauth_action_box.text,loginUrl:n.sign_in_url,joinUrl:n.sign_up_url,showOpenInApp:n.show_open_in_app,openInAppUrl:n.open_in_app_url}),d=(0,o.default)({body:l}),_=!1,p=function(){_||t&&t(),e(r.MarketingTransitionItemEventType.CLOSE)};(0,o.open)(a.default.elem(d),!0,"",{onClose:function(){p()},onOverlayClick:function(){setTimeout((function(){return p()}),500)}});var g=(0,u.$)(".UnauthorizedActionModal__openInAppButton"),h=(0,u.$)(".UnauthorizedActionModal__signInTextLink"),v=(0,u.$)(".UnauthorizedActionModal__signUpTextLink"),k=(0,u.$)('.UnauthorizedActionModal .Btn[data-type="login"]'),w=(0,u.$)('.UnauthorizedActionModal .Btn[data-type="join"]'),m=function(n){window.ModalMenu.close(n)},U=function(n,t){var i=n.target;_=!0,e(t),m(i),n.preventDefault(),n.stopPropagation(),setTimeout((function(){return window.nav.go(i)}),110)};[k,h].forEach((function(n){null==n||n.addEventListener("click",(function(n){U(n,r.MarketingTransitionItemEventType.CLICK_SIGN_IN)}))})),[w,v].forEach((function(n){null==n||n.addEventListener("click",(function(n){U(n,r.MarketingTransitionItemEventType.CLICK_SIGN_UP)}))})),null==g||g.addEventListener("click",(function(n){var t=n.target;_=!0,e(r.MarketingTransitionItemEventType.CLICK_OPEN_IN_APP),m(t),n.preventDefault(),n.stopPropagation();var i=t.getAttribute("href");if(i){var o=f(i);setTimeout((function(){return window.nav.go(o)}),110)}})),e(r.MarketingTransitionItemEventType.OPEN)}}function s(){window.ajax.post("/?act=get_unauth_action_box",{_ajax:1,write_ab:1})}var _,p=0,g=!1;var h={onActionClick:function(n,t,e){var i;(null===(i=window.UnauthorizedFeed)||void 0===i?void 0:i.isActive)?window.UnauthorizedFeed.onAction(n,t):window.vk.id||(null==n||n.preventDefault(),window.ajax.post("/?act=get_unauth_action_box",{_ajax:1,action:t,object:e,to:window.location.href.replace(window.location.origin,"")},{onDone:function(n){n.unauth_action_box&&d(n)}}))},onMoreBoxActionClick:function(n,t){n&&(t&&c.marketingTransitionItemStat.logEvent(r.MarketingTransitionItemCampaignType.UNAUTH_ACTION_BOX,t,r.MarketingTransitionItemSourceType.MORE,window.location.href),n.preventDefault(),n.stopPropagation(),setTimeout((function(){return window.nav.go(n.target)}),110))},initScrollMoreBox:function(n){var t,e=function(){g=!1,window.removeEventListener("scroll",_)};e(),p=Date.now(),_=function(){g||Date.now()-p<2e3||(window.cur.unauthScrollMoreBox||window.pageYOffset>=2*window.innerHeight&&(g=!0,d(n)))},window.addEventListener("scroll",_),null===(t=window.cur.destroy)||void 0===t||t.push((function(){return e()}))},showMoreBox:function(n,t,e,i){n&&n.preventDefault(),s(),window.ajax.post("/?act=get_unauth_action_box",{_ajax:1,action:"more",owner_id:t,source:e,to:window.location.href.replace(window.location.origin,"")},{loader:!0,onDone:function(n){n.unauth_action_box&&d(n,i)}})},writeUnauhActionBoxABGroup:s};function f(n){var t=n.includes("?")?"&":"?";return""+n+t+"unauth_id="+(0,l.getCookie)("remixstid")+"&target_url="+encodeURIComponent(window.location.href)}}},function(n){"use strict";n.O(0,[4578,1777,4736,5456,5790,3898,5411,6855,6199,490,410,6444,8592,7219,6429],(function(){return t=64896,n(n.s=t);var t}));n.O()}]);