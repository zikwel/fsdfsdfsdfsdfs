(self.webpackChunkvk=self.webpackChunkvk||[]).push([[6855],{34028:function(e,t,s){"use strict";s.d(t,{Embedded:function(){return i}});var i=function(){function e(e){var t=this;this.receiver=!1,this._requestId=1,this._requests={},this._onMessage=function(e){if(e.origin===t.origin&&e.data&&e.data.embeddedName===t.name){t.target=e.source;var s=e.data,i=s.response;if(i){var n=t._requests[i];n&&n(s.data),t._requests[i]=null}else s.request&&s.action&&Promise.resolve(t.onMessage(s.action,s.data)).then((function(e){t._sendResponse(s.request,s.action,e)}))}},this.name=e.name,this.target=e.target,this.origin=e.origin||"https://"+e.host,this.receiver=e.receiver||!1,this.onMessage=e.onMessage,window.addEventListener("message",this._onMessage,!1)}return e.prototype._sendResponse=function(e,t,s){this.target&&this.target.postMessage({embeddedName:this.name,action:t,response:e,data:s},this.origin)},e.prototype.sendMessage=function(e,t){var s=this;if(void 0===t&&(t={}),!this.target)return Promise.reject();var i=this._requestId,n=new Promise((function(e){s._requestId++,s._requests[i]=e}));return this.target.postMessage({embeddedName:this.name,action:e,data:t,request:i},this.origin),n},e.prototype.destroy=function(){window.removeEventListener("message",this._onMessage,!1),this.target=void 0},e}()}}]);