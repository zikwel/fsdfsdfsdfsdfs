(self.webpackChunkvk=self.webpackChunkvk||[]).push([[5790],{60859:function(e,r,n){"use strict";function t(e,r,n){var t=[d.step.run({fn:function(e){return r(e)}})];if(n){var a=d.createNode({node:t}),o=e.graphite.id,i=n.additionalLinks,u=i[o]||[];return i[o]=u,u.push(a),function(){var e=u.indexOf(a);-1!==e&&u.splice(e,1),d.clearNode(a)}}var c=d.createNode({node:t,parent:[e],family:{owners:e}});return function(){d.clearNode(c)}}function a(e,r){return r.displayName=e,r}function o(e,r){d.is.store(e)||m("expect useStore argument to be a store");var n=g(e,r),a=y(),o=p.useRef({store:e,value:n,pending:0});return v((function(){var n=t(e,(function(e){var r=o.current;r.pending||(r.value=e,r.pending=1,a(),r.pending=0)}),r),i=g(e,r),u=o.current;return u.store===e&&u.value!==i&&(u.value=i,u.pending=1,a(),u.pending=0),u.store=e,n}),[e,r]),n}function i(e,r){var n,a,o,i=e[0],c=e[1],f=h;c?(n=c,a=i,o=[]):(n=i.fn,a=i.store,o=i.keys,f=i.updateFilter||h),d.is.store(a)||m("useStoreMap expects a store"),Array.isArray(o)||m("useStoreMap expects an array as keys"),"function"!=typeof n&&m("useStoreMap expects a function");var s=p.useRef({}),l=s.current;l.fn=n,l.upd=f,l.init=l.store===a,l.store=a,l.active=1,v((function(){return function(){s.current&&(s.current.active=0)}}),[]);var b=y(),k=[r].concat(o),w=p.useMemo((function(){return u(g(a,r),o,s.current),t(a,(function(e){return u(e,o,s.current,b)}),r)}),k);return v((function(){return function(){return w()}}),k),l.val}function u(e,r,n,t){var a=n.fn(e,r);n.init?void 0!==a&&h(a,n.val)&&n.upd(a,n.val)&&(n.val=a,t&&n.active&&t()):(n.val=a,n.init=1)}function c(e){return o(e)}function f(e,r){function n(e){var n=p.useRef(e),a=c(t);v((function(){return i({props:n.current,state:t.getState()}),function(){u({props:n.current,state:t.getState()})}}),[]);var o=r(e,a);return n.current=e,o}var t;d.is.store(e)?e:"object"==typeof e&&null!==e?d.combine(e):m("shape should be a store or object with stores");var o="Unknown";t&&t.shortName&&t.shortName;var i=d.createEvent(),u=d.createEvent();return n.mounted=i,n.unmounted=u,a(o+".View",n)}function s(e,r){void 0===r&&{};var n=p.useRef({value:null,count:0});v((function(){return e.open(n.current.value),function(){return e.close(n.current.value)}}),[e]),function(e,r){if(e===r)return 1;if("object"==typeof e&&null!==e&&"object"==typeof r&&null!==r){var n=Object.keys(e),t=Object.keys(r);if(n.length!==t.length)return 0;for(var a=0;a<n.length;a++){var o=n[a];if(e[o]!==r[o])return 0}return 1}return 0}(n.current.value,r)||(n.current.value=r,n.current.count+=1),v((function(){e.set(n.current.value)}),[n.current.count])}var l=n(56769),d=n(72864),p=function(e){return e&&"object"==typeof e&&"default"in e?e.default:e}(l),v="undefined"!=typeof window?p.useLayoutEffect:p.useEffect,m=function(e){throw Error(e)},g=function(e,r){return r?r.getState(e):e.getState()},h=function(e,r){return e!==r},y=function(){return p.useReducer((function(e){return e+1}),0)[1]},b=function(e){return console.error(e+" is deprecated")},k=function(e){return function(r){var n=e;return"function"!=typeof e&&(n=r,r=e),a("Connect("+(n.displayName||n.name||"Unknown")+")",(function(e){return p.createElement(n,Object.assign({},e,c(r)))}))}};r.useStore=c,r.useStoreMap=function(e,r){return i([e,r])}},72864:function(e,r){"use strict";function n(e,r){for(var n in e)r(e[n],n)}function t(e,r){e.forEach(r)}function a(e,r){if(!e)throw Error(r)}function o(e,r){Y={parent:Y,value:e,template:H(e,"template")||Z(),sidRoot:H(e,"sidRoot")||Y&&Y.sidRoot};try{return r()}finally{Y=U(Y)}}function i(e){var r=void 0===e?{}:e,n=r.node,a=void 0===n?[]:n,o=r.parent,i=r.child,u=void 0===i?r.to||r.target:i,c=r.scope,f=void 0===c?{}:c,s=r.meta,l=void 0===s?{}:s,d=r.family,p=void 0===d?{type:"regular"}:d,v=r.regional,m=ne(void 0===o?r.from||r.source:o),g=ne(p.links),h=ne(p.owners),y=[];t(a,(function(e){return e&&E(y,e)}));var b={id:X(),seq:y,next:ne(u),meta:l,scope:f,family:{type:p.type||"crosslink",links:g,owners:h}};return t(g,(function(e){return E(P(e),b)})),t(h,(function(e){return E(V(e),b)})),t(m,(function(e){return E(e.next,b)})),v&&Y&&re(B(Y),[b]),b}function u(e,r,n){var a=Pe,o=null,i=Oe;if(e.target&&(r=e.params,n=e.defer,a="page"in e?e.page:a,e.stack&&(o=e.stack),i=W(e)||i,e=e.target),i&&Oe&&i!==Oe&&(Oe=null),Array.isArray(e))for(var u=0;u<e.length;u++)qe("pure",a,z(e[u]),o,r[u],i);else qe("pure",a,z(e),o,r,i);if(!n||Ee){var c,f,s,l,d,p,v={isRoot:Ee,currentPage:Pe,scope:Oe,isWatch:_e,isPure:ze};Ee=0;for(var m=function(){var e=l.idx,r=l.stack,n=l.type;s=r.node,Pe=d=r.page,Oe=W(r),d?p=d.reg:Oe&&(p=Oe.reg);var a=!!d,o=!!Oe,i={fail:0,scope:s.scope};c=f=0;for(var u=e;u<s.seq.length&&!c;u++){var m=s.seq[u];if(m.order){var g=m.order,h=g.priority,y=g.barrierID,b=y?d?d.fullID+"_"+y:y:0;if(u!==e||n!==h)return y?De.has(b)||(De.add(b),Re(u,r,h,y)):Re(u,r,h),"continue|kernelLoop";y&&De.delete(b)}switch(m.type){case"mov":var k=m.data,w=void 0;switch(k.from){case j:w=B(r);break;case"a":case"b":w=r[k.from];break;case"value":w=k.store;break;case"store":if(p&&!p[k.store.id])if(a){var S=Be(d,k.store.id);r.page=d=S,S?p=S.reg:o?(Ue(Oe,k.store,0,1,k.softRead),p=Oe.reg):p=void 0}else o&&Ue(Oe,k.store,0,1,k.softRead);w=xe(p&&p[k.store.id]||k.store)}switch(k.to){case j:r.value=w;break;case"a":case"b":r[k.to]=w;break;case"store":Te(d,Oe,s,k.target).current=w}break;case"compute":var x=m.data;if(x.fn){_e="watch"===H(s,"op"),ze=x.pure;var A=x.safe?(0,x.fn)(B(r),i.scope,r):We(i,x.fn,r);x.filter?f=!A:r.value=A,_e=v.isWatch,ze=v.isPure}}c=i.fail||f}if(!c){var M=B(r);t(s.next,(function(e){qe("child",d,e,r,M,W(r))}));var N=W(r);if(N){H(s,"needFxCounter")&&qe("child",d,N.fxCount,r,M,N),H(s,"storeChange")&&qe("child",d,N.storeChange,r,M,N);var C=N.additionalLinks[s.id];C&&t(C,(function(e){qe("child",d,e,r,M,N)}))}}};l=Ie();)m();Ee=v.isRoot,Pe=v.currentPage,Oe=W(v)}}function c(e,r){void 0===r&&(r="combine");var t=r+"(",a="",o=0;return n(e,(function(e){o<25&&(null!=e&&(t+=a,t+=A(e)?G(e).fullName:e.toString()),o+=1,a=", ")})),t+")"}function f(e,r){var n,t,a=e;if(r){var o=G(r);0===e.length?(n=o.path,t=o.fullName):(n=o.path.concat([e]),t=0===o.fullName.length?e:o.fullName+"/"+e)}else n=0===e.length?[]:[e],t=e;return{shortName:a,fullName:t,path:n}}function s(e,r){var n=r?e:e[0];ie(n);var t=n.or,a=n.and;if(a){var o=r?a:a[0];if(te(o)&&"and"in o){var i=s(a,r);e=i[0],t=Object.assign({},t,i[1])}else e=a}return[e,t]}function l(e){var r=Z();if(r){for(var n=r.handlers[e],t=arguments.length,a=new Array(t>1?t-1:0),o=1;o<t;o++)a[o-1]=arguments[o];if(n)return n.apply(void 0,[r].concat(a))}}function d(e,r,n,t){var a=Pe,o=null;if(r)for(o=Pe;o&&o.template!==r;)o=U(o);Le(o);var i=e.create(n,t);return Le(a),i}function p(e,r){var n=function e(r){_(!H(e,"derived"),"call of derived event","createEvent"),_(!ze,"unit call from pure function","operators like sample");for(var n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return Pe?d(e,t,r,a):e.create(r,a)},t=Z();return Object.assign(n,{graphite:i({meta:er("event",n,e,r),regional:1}),create:function(e){return u({target:n,params:e,scope:Oe}),e},watch:function(e){return Ye(n,e)},map:function(e){return nr(n,x,e,[ke()])},filter:function(e){return nr(n,"filter",e.fn?e:e.fn,[ke(de,1)])},filterMap:function(e){return nr(n,"filterMap",e,[ke(),ye((function(e){return!oe(e)}),1)])},prepend:function(e){var r=p("* → "+n.shortName,{parent:U(n)});return l("eventPrepend",z(r)),Xe(r,n,[ke()],"prepend",e),Ze(n,r),r}})}function v(e,r){var n=Se(e),o=rr("updates");l("storeBase",n);var c=n.id,f={subscribers:new Map,updates:o,defaultState:e,stateRef:n,getState:function(){var e,r=n;if(Pe){for(var t=Pe;t&&!t.reg[c];)t=U(t);t&&(e=t)}return!e&&Oe&&(Ue(Oe,n,1),e=Oe),e&&(r=e.reg[c]),xe(r)},setState:function(e){return u({target:f,params:e,defer:1,scope:Oe})},reset:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t(r,(function(e){return f.on(e,(function(){return f.defaultState}))})),f},on:function(e,r){return ce(e,".on","first argument"),_(!H(f,"derived"),".on in derived store","createStore"),t(Array.isArray(e)?e:[e],(function(e){f.off(e),T(f).set(e,Qe(tr(e,f,"on",le,r)))})),f},off:function(e){var r=T(f).get(e);return r&&(r(),T(f).delete(e)),f},map:function(e,r){var t,a;te(e)&&(t=e,e=e.fn),_(oe(r),"second argument of store.map","updateFilter");var o=f.getState();Z()?a=null:oe(o)||(a=e(o,r));var i=v(a,{name:f.shortName+" → *",derived:1,and:t}),u=tr(f,i,x,se,e);return je(L(i),{type:x,fn:e,from:n}),L(i).noInit=1,l("storeMap",n,u),i},watch:function(e,r){if(!r||!A(e)){var t=Ye(f,e);return l("storeWatch",n,e)||e(f.getState()),t}return a(ae(r),"second argument should be a function"),e.watch((function(e){return r(f.getState(),e)}))}},s=er("store",f,r),d=f.defaultConfig.updateFilter;f.graphite=i({scope:{state:n,fn:d},node:[ye((function(e,r,t){return t.scope&&!t.scope.reg[n.id]&&(t.b=1),e})),be(n),ye((function(e,r,n){var t=n.a,a=n.b;return!oe(e)&&(e!==t||a)}),1),d&&ke(se,1),me({from:j,target:n})],child:o,meta:s,regional:1});var p=H(f,"sid");return p&&("ignore"!==H(f,"serialize")&&$(f,"storeChange",1),n.sid=p),a(H(f,"derived")||!oe(e),"current state can't be undefined, use null instead"),re(f,[o]),f}function m(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var t,o,i,u=s(r);i=u[1];var c,f,l,d=(r=u[0])[r.length-1];if(ae(d)?(o=r.slice(0,-1),t=d):o=r,1===o.length){var p=o[0];N(p)||(c=p,f=1)}if(!f&&(c=o,t)){l=1;var v=t;t=function(e){return v.apply(void 0,e)}}return a(te(c),"shape should be an object"),ar(Array.isArray(c),!l,c,i,t)}function g(){var e={};return e.req=new Promise((function(r,n){e.rs=r,e.rj=n})),e.req.catch((function(){})),e}function h(e,r){var n=p(ae(e)?{handler:e}:e,r),t=z(n);$(t,"op",n.kind="effect"),n.use=function(e){return a(ae(e),".use argument should be a function"),d.scope.handler=e,n},n.use.getCurrent=function(){return d.scope.handler};var o=n.finally=rr("finally"),c=n.done=o.filterMap({named:"done",fn:function(e){if("done"===e.status)return{params:e.params,result:e.result}}}),f=n.fail=o.filterMap({named:"fail",fn:function(e){if("fail"===e.status)return{params:e.params,error:e.error}}}),s=n.doneData=c.map({named:"doneData",fn:function(e){return e.result}}),l=n.failData=f.map({named:"failData",fn:function(e){return e.error}}),d=i({scope:{handlerId:H(t,"sid"),handler:n.defaultConfig.handler||function(){return a(0,"no handler used in "+n.getType())}},node:[ye((function(e,r,n){var t=r,a=t.handler;if(W(n)){var o=W(n).handlers[t.handlerId];o&&(a=o)}return e.handler=a,e}),0,1),ye((function(e,r,n){var t=e.params,a=e.req,i=e.handler,u=e.args,c=void 0===u?[t]:u,f=ir(t,a,1,o,n),s=ir(t,a,0,o,n),l=or(i,s,c),d=l[1];l[0]&&(te(d)&&ae(d.then)?d.then(f,s):f(d))}),0,1)],meta:{op:"fx",fx:"runner"}});t.scope.runner=d,E(t.seq,ye((function(e,r,n){var t=r.runner,a=U(n)?{params:e,req:{rs:function(){},rj:function(){}}}:e;return u({target:t,params:a,defer:1,scope:W(n)}),a.params}),0,1)),n.create=function(e){var r=g(),t={params:e,req:r};if(Oe){if(!_e){var a=Oe;r.req.finally((function(){Ve(a)})).catch((function(){}))}u({target:n,params:t,scope:Oe})}else u(n,t);return r.req};var m=n.inFlight=v(0,{named:"inFlight"}).on(n,(function(e){return e+1})).on(o,(function(e){return e-1}));$(o,"needFxCounter","dec"),$(n,"needFxCounter",1);var h=n.pending=m.map({fn:function(e){return e>0},named:"pending"});return re(n,[o,c,f,s,l,h,m]),n}function y(e,r){ce(e,"merge","first argument");var n=p({name:c(e,"merge"),derived:1,and:r});return Xe(e,n,[],"merge"),n}function b(e,r){var n=0;return t(cr,(function(t){t in e&&(a(null!=e[t],fr(r,t)),n=1)})),n}function k(e,r){var n=[];!function e(a){F(n,a)||(E(n,a),"store"===H(a,"op")&&H(a,"sid")&&r(a,H(a,"sid")),t(a.next,e),t(P(a),e),t(V(a),e))}(e)}function w(e,r){if(Array.isArray(e)&&(e=new Map(e)),e instanceof Map){var n={};return t(e,(function(e,t){a(A(t),"Map key should be a unit"),r&&r(t,e),a(t.sid,"unit should have a sid"),a(!(t.sid in n),"duplicate sid found"),n[t.sid]=e})),n}return e}Object.defineProperty(r,"__esModule",{value:1});for(var S="undefined"!=typeof Symbol&&Symbol.observable||"@@observable",x="map",j="stack",A=function(e){return(ae(e)||te(e))&&"kind"in e},M=function(e){return function(r){return A(r)&&r.kind===e}},N=M("store"),C=M("event"),O=M("effect"),I=M("domain"),q=M("scope"),R={__proto__:null,unit:A,store:N,event:C,effect:O,domain:I,scope:q},F=function(e,r){return e.includes(r)},D=function(e,r){var n=e.indexOf(r);-1!==n&&e.splice(n,1)},E=function(e,r){return e.push(r)},_=function(e,r,n){return!e&&console.error(r+" is deprecated"+(n?", use "+n+" instead":""))},z=function(e){return e.graphite||e},P=function(e){return e.family.owners},V=function(e){return e.family.links},L=function(e){return e.stateRef},B=function(e){return e.value},T=function(e){return e.subscribers},U=function(e){return e.parent},W=function(e){return e.scope},H=function(e,r){return z(e).meta[r]},$=function(e,r,n){return z(e).meta[r]=n},G=function(e){return e.compositeName},J=function(){var e=0;return function(){return""+ ++e}},K=J(),Q=J(),X=J(),Y=null,Z=function(){return Y&&Y.template},ee=function(e){return e&&Y&&Y.sidRoot&&(e=Y.sidRoot+"|"+e),e},re=function(e,r){var n=z(e);t(r,(function(e){var r=z(e);"domain"!==n.family.type&&(r.family.type="crosslink"),E(P(r),n),E(V(n),r)}))},ne=function(e){return void 0===e&&(e=[]),(Array.isArray(e)?e:[e]).flat().map(z)},te=function(e){return"object"==typeof e&&null!==e},ae=function(e){return"function"==typeof e},oe=function(e){return void 0===e},ie=function(e){return a(te(e)||ae(e),"expect first argument be an object")},ue=function(e,r,n,t){return a(!(!te(e)&&!ae(e)||!("family"in e)&&!("graphite"in e)),r+": expect "+n+" to be a unit (store, event or effect)"+t)},ce=function(e,r,n){Array.isArray(e)?t(e,(function(e,t){return ue(e,r,t+" item of "+n,"")})):ue(e,r,n," or array of units")},fe=function(e,r,n){return void 0===n&&(n="target"),t(ne(r),(function(r){return _(!H(r,"derived"),e+': derived unit in "'+n+'"',"createEvent/createStore")}))},se=function(e,r,n){return(0,r.fn)(e,n.a)},le=function(e,r,n){return(0,r.fn)(n.a,e)},de=function(e,r){return(0,r.fn)(e)},pe=function(e,r,n,t){var a={id:Q(),type:e,data:r};return n&&(a.order={priority:n},t&&(a.order.barrierID=++ve)),a},ve=0,me=function(e){var r=e.from,n=e.target,t=e.to;return pe("mov",{from:void 0===r?"store":r,store:e.store,to:void 0===t?n?"store":j:t,target:n},e.priority,e.batch)},ge=function(e){var r=e.safe,n=e.filter,t=e.pure;return pe("compute",{fn:e.fn,safe:void 0===r?0:r,filter:void 0===n?0:n,pure:void 0===t?0:t},e.priority,e.batch)},he=function(e){return ge({fn:e.fn,priority:"effect"})},ye=function(e,r,n){return ge({fn:e,safe:1,filter:r,priority:n&&"effect"})},be=function(e,r,n){return me({store:e,to:r?j:"a",priority:n&&"sampler",batch:1})},ke=function(e,r){return void 0===e&&(e=de),ge({fn:e,pure:1,filter:r})},we={mov:me,compute:ge,filter:function(e){return ge({fn:e.fn,filter:1,pure:e.pure})},run:he},Se=function(e){return{id:Q(),current:e}},xe=function(e){return e.current},je=function(e,r){e.before||(e.before=[]),E(e.before,r)},Ae=null,Me=function e(r,n){return r?n?((r.v.type===n.v.type&&r.v.id>n.v.id||Fe(r.v.type)>Fe(n.v.type))&&(t=r,r=n,n=t),t=e(r.r,n),r.r=r.l,r.l=t,r):r:n;var t},Ne=[],Ce=0;Ce<6;)E(Ne,{first:null,last:null,size:0}),Ce+=1;var Oe,Ie=function(){for(var e=0;e<6;e++){var r=Ne[e];if(r.size>0){if(3===e||4===e){r.size-=1;var n=Ae.v;return Ae=Me(Ae.l,Ae.r),n}1===r.size&&(r.last=null);var t=r.first;return r.first=t.r,r.size-=1,t.v}}},qe=function(e,r,n,t,a,o){return Re(0,{a:null,b:null,node:n,parent:t,value:a,page:r,scope:o},e)},Re=function(e,r,n,t){void 0===t&&(t=0);var a=Fe(n),o=Ne[a],i={v:{idx:e,stack:r,type:n,id:t},l:null,r:null};3===a||4===a?Ae=Me(Ae,i):(0===o.size?o.first=i:o.last.r=i,o.last=i),o.size+=1},Fe=function(e){switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},De=new Set,Ee=1,_e=0,ze=0,Pe=null,Ve=function(e){Oe=e},Le=function(e){Pe=e},Be=function(e,r){if(e){for(;e&&!e.reg[r];)e=U(e);if(e)return e}return null},Te=function(e,r,n,t,a){var o=Be(e,t.id);return o?o.reg[t.id]:r?(Ue(r,t,a),r.reg[t.id]):t},Ue=function e(r,n,a,o,i){var u=r.reg,c=n.sid;if(!u[n.id]){var f={id:n.id,current:n.current};if(c&&c in r.sidValuesMap&&!(c in r.sidIdMap))f.current=r.sidValuesMap[c];else if(n.before&&!i){var s=0,l=a||!n.noInit||o;t(n.before,(function(n){switch(n.type){case x:var t=n.from;if(t||n.fn){t&&e(r,t,a,o);var i=t&&u[t.id].current;l&&(f.current=n.fn?n.fn(i):i)}break;case"field":s||(s=1,f.current=Array.isArray(f.current)?[].concat(f.current):Object.assign({},f.current)),e(r,n.from,a,o),l&&(f.current[n.field]=u[u[n.from.id].id].current)}}))}c&&(r.sidIdMap[c]=n.id),u[n.id]=f}},We=function(e,r,n){try{return r(B(n),e.scope,n)}catch(r){console.error(r),e.fail=1}},He=function e(r,t){return void 0===t&&(t={}),te(r)&&(e(r.or,t),n(r,(function(e,r){oe(e)||"or"===r||"and"===r||(t[r]=e)})),e(r.and,t)),t},$e=function(e,r){D(e.next,r),D(P(e),r),D(V(e),r)},Ge=function e(r,n,t){var a;r.next.length=0,r.seq.length=0,r.scope=null;for(var o=V(r);a=o.pop();)$e(a,r),(n||t&&"sample"!==H(r,"op")||"crosslink"===a.family.type)&&e(a,n,"on"!==H(a,"op")&&t);for(o=P(r);a=o.pop();)$e(a,r),t&&"crosslink"===a.family.type&&e(a,n,"on"!==H(a,"op")&&t)},Je=function(e){return e.clear()},Ke=function(e,r){var n=(void 0===r?{}:r).deep,t=0;if(e.ownerSet&&e.ownerSet.delete(e),N(e))Je(T(e));else if(I(e)){t=1;var a=e.history;Je(a.events),Je(a.effects),Je(a.stores),Je(a.domains)}Ge(z(e),!!n,t)},Qe=function(e){var r=function(){return Ke(e)};return r.unsubscribe=r,r},Xe=function(e,r,n,t,a){return i({node:n,parent:e,child:r,scope:{fn:a},meta:{op:t},family:{owners:[e,r],links:r},regional:1})},Ye=function(e,r){return a(ae(r),".watch argument should be a function"),Qe(i({scope:{fn:r},node:[he({fn:de})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))},Ze=function(e,r,n){void 0===n&&(n="event"),U(e)&&U(e).hooks[n](r)},er=function(e,r,n,t){var a="domain"===e,o=K(),i=He({or:t,and:"string"==typeof n?{name:n}:n}),u=i.parent,c=void 0===u?null:u,s=i.sid,l=void 0===s?null:s,d=i.named,p=void 0===d?null:d,v=p||i.name||(a?"":o),m=f(v,c),g={op:r.kind=e,name:r.shortName=v,sid:r.sid=ee(l),named:p,unitId:r.id=o,serialize:i.serialize,derived:i.derived,config:i};if(r.parent=c,r.compositeName=m,r.defaultConfig=i,r.thru=function(e){return _(0,"thru","js pipe"),e(r)},r.getType=function(){return m.fullName},!a){r.subscribe=function(e){return ie(e),r.watch(ae(e)?e:function(r){return e.next&&e.next(r)})},r[S]=function(){return r};var h=Z();h&&(g.nativeTemplate=h)}return g},rr=function(e){return p({named:e})},nr=function(e,r,n,t){var a;te(n)&&(a=n,n=n.fn);var o=p({name:e.shortName+" → *",derived:1,and:a});return Xe(e,o,t,r,n),o},tr=function(e,r,n,t,a){var o=L(r),i=me({store:o,to:"a",priority:"read"});n===x&&(i.data.softRead=1);var u=[i,ke(t)];return l("storeOnMap",o,u,N(e)&&L(e)),Xe(e,r,u,n,a)},ar=function(e,r,t,o,i){var u=e?function(e){return e.slice()}:function(e){return Object.assign({},e)},f=e?[]:{},s=u(f),d=Se(s),p=Se(1);d.type=e?"list":"shape",d.noInit=1,l("combineBase",d,p);var m=v(s,{name:c(t),derived:1,and:o}),g=L(m);g.noInit=1,$(m,"isCombine",1);var h=be(d);h.order={priority:"barrier"};var y=[ye((function(e,r,n){return n.scope&&!n.scope.reg[d.id]&&(n.c=1),e})),h,me({store:p,to:"b"}),ye((function(e,n,t){var a=n.key;if(t.c||e!==t.a[a])return r&&t.b&&(t.a=u(t.a)),t.a[a]=e,1}),1),me({from:"a",target:d}),me({from:"value",store:0,target:p}),me({from:"value",store:1,target:p,priority:"barrier",batch:1}),be(d,1),i&&ke()];return n(t,(function(e,r){if(!N(e))return a(!A(e)&&!oe(e),"combine expects a store in a field "+r),void(s[r]=f[r]=e);f[r]=e.defaultState,s[r]=e.getState();var n=Xe(e,m,y,"combine",i);n.scope.key=r;var t=L(e);je(d,{type:"field",field:r,from:t}),l("combineField",t,n)})),m.defaultShape=t,je(g,{type:x,from:d,fn:i}),Z()||(m.defaultState=i?g.current=i(s):f),m},or=function(e,r,n){try{return[1,e.apply(void 0,n)]}catch(e){return r(e),[0,null]}},ir=function(e,r,n,t,a){return function(o){return u({target:[t,ur],params:[n?{status:"done",params:e,result:o}:{status:"fail",params:e,error:o},{value:o,fn:n?r.rs:r.rj}],defer:1,page:a.page,scope:W(a)})}},ur=i({node:[he({fn:function(e){return(0,e.fn)(e.value)}})],meta:{op:"fx",fx:"sidechain"}}),cr=["source","clock","target"],fr=function(e,r){return e+": "+r+" should be defined"},sr=function(e,r,n,t,o,i,u,c,f,s,d,g){var h=!!o;a(!oe(n)||!oe(r),fr(e,"either source or clock"));var b=0;oe(n)?b=1:A(n)||(n=m(n)),oe(r)?r=n:(ce(r,e,"clock"),Array.isArray(r)&&(r=y(r))),b&&(n=r),c||u||(u=n.shortName);var k="none";(d||t)&&(A(t)?k="unit":(a(ae(t),"`filter` should be function or unit"),k="fn")),o?(ce(o,e,"target"),fe(e,o)):"none"===k&&s&&N(n)&&N(r)?o=v(i?i(xe(L(n)),xe(L(r))):xe(L(n)),{name:u,sid:g,or:c}):(o=p({name:u,derived:1,or:c}),l("sampleTarget",z(o)));var w=Se(),S=[];if("unit"===k){var x=dr(t,o,r,w,e),M=x[0];S=[].concat(lr(x[1]),lr(M))}var C=dr(n,o,r,w,e),O=C[0],I=C[1];return re(n,[Xe(r,o,[l("sampleSourceLoader"),me({from:j,target:w})].concat(lr(I),[be(O,1,f)],S,[be(w),"fn"===k&&ke((function(e,r,n){return t(e,n.a)}),1),i&&ke(se),l("sampleSourceUpward",h)]),e,i)]),o},lr=function(e){return[be(e),ye((function(e,r,n){return n.a}),1)]},dr=function(e,r,n,t,a){var o=N(e),u=o?L(e):Se(),c=Se(o);return o||i({parent:e,node:[me({from:j,target:u}),me({from:"value",store:1,target:c})],family:{owners:[e,r,n],links:r},meta:{op:a},regional:1}),l("sampleSource",c,u,t),[u,c]},pr=function(e,r,n,t){var a=e[r];a&&u({target:a,params:Array.isArray(a)?a.map((function(){return n})):n,defer:1,stack:t})};r.allSettled=function(e,r){var n=r.scope,t=r.params;if(!A(e))return Promise.reject(Error("first argument should be unit"));var a=g();a.parentFork=Oe;var o=n.fxCount;E(o.scope.defers,a);var i=[e],c=[];return E(c,O(e)?{params:t,req:{rs:function(e){a.value={status:"done",value:e}},rj:function(e){a.value={status:"fail",value:e}}}}:t),E(i,o),E(c,null),u({target:i,params:c,scope:n}),a.req},r.attach=function(e){var r,n=s(e,1),t=(e=n[0]).source,a=e.effect,o=e.mapParams,i=h(e,n[1]);$(i,"attached",1);var c,l,d=z(i).scope.runner,p=ye((function(e,r,n){var a,c=e.params,f=e.req,s=e.handler,l=i.finally,d=ir(c,f,0,l,n),p=n.a,v=O(s),m=1;if(o){var g=or(o,d,[c,p]);m=g[0],a=g[1]}else a=t&&v?p:c;if(m){if(!v)return e.args=[p,a],1;u({target:s,params:{params:a,req:{rs:ir(c,f,1,l,n),rj:d}},page:n.page,defer:1})}}),1,1);t?(N(t)?re(l=t,[i]):(l=m(t),re(i,[l])),c=[be(L(l)),p]):c=[p],(r=d.seq).splice.apply(r,[1,0].concat(c)),i.use(a);var v=U(a);return v&&(Object.assign(G(i),f(i.shortName,v)),i.defaultConfig.parent=v),Ze(a,i,"effect"),i},r.clearNode=Ke,r.combine=m,r.createApi=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var a=s(r),o=a[0],i=o[0],u=o[1],c=a[1],f={};return n(u,(function(e,r){var n=f[r]=p(r,{parent:U(i),config:c});i.on(n,e),Ze(i,n)})),f},r.createDomain=function e(r,a){var o=i({family:{type:"domain"},regional:1}),c={history:{},graphite:o,hooks:{}};o.meta=er("domain",c,r,a),n({Event:p,Effect:h,Store:v,Domain:e},(function(e,r){var n=r.toLowerCase(),a=rr("on"+r);c.hooks[n]=a;var o=new Set;c.history[n+"s"]=o,a.create=function(e){return u(a,e),e},E(z(a).seq,ye((function(e,r,n){return n.scope=null,e}))),a.watch((function(e){re(c,[e]),o.add(e),e.ownerSet||(e.ownerSet=o),U(e)||(e.parent=c)})),re(c,[a]),c["onCreate"+r]=function(e){return t(o,e),a.watch(e)},c["create"+r]=c[n]=function(r,n){return a(e(r,{parent:c,or:n}))}}));var f=U(c);return f&&n(c.hooks,(function(e,r){return Xe(e,f.hooks[r])})),c},r.createEffect=h,r.createEvent=p,r.createNode=i,r.createStore=v,r.createStoreObject=function(){return _(0,"createStoreObject","combine"),m.apply(void 0,arguments)},r.fork=function(e,r){var n,o=e;I(e)&&(n=e,o=r);var u=function(e){var r=i({scope:{defers:[],inFlight:0,fxID:0},node:[ye((function(e,r,n){U(n)?"dec"===H(U(n).node,"needFxCounter")?r.inFlight-=1:(r.inFlight+=1,r.fxID+=1):r.fxID+=1})),ge({priority:"sampler",batch:1}),ye((function(e,r){var n=r.defers,a=r.fxID;r.inFlight>0||0===n.length||Promise.resolve().then((function(){r.fxID===a&&t(n.splice(0,n.length),(function(e){Ve(e.parentFork),e.rs(e.value)}))}))}),0,1)]}),n=i({node:[ye((function(e,r,n){var t=U(n);if(t&&U(t)){var a=t.node;if(!H(a,"isCombine")||"combine"!==H(U(t).node,"op")){var o=W(n),i=a.scope.state.id,u=H(a,"sid");o.sidIdMap[u]=i,o.sidValuesMap[u]=e}}}))]}),a={cloneOf:e,reg:{},sidValuesMap:{},sidIdMap:{},getState:function(e){if("current"in e)return Te(Pe,a,null,e).current;var r=z(e);return Te(Pe,a,r,r.scope.state,1).current},kind:"scope",graphite:i({family:{type:"domain",links:[r,n]},meta:{unit:"fork"},scope:{forkInFlightCounter:r}}),additionalLinks:{},handlers:{},fxCount:r,storeChange:n};return a}(n);if(o){if(o.values){var c=w(o.values,(function(e){return a(N(e),"Values map can contain only stores as keys")}));Object.assign(u.sidValuesMap,c)}o.handlers&&(u.handlers=w(o.handlers,(function(e){return a(O(e),"Handlers map can contain only effects as keys")})))}return u},r.forward=function(e){var r="forward",n=s(e,1),t=n[0],a=t.from,o=t.to,u=n[1];return ce(a,r,'"from"'),ce(o,r,'"to"'),fe(r,o,"to"),Qe(i({parent:a,child:o,meta:{op:r,config:u},family:{},regional:1}))},r.fromObservable=function(e){ie(e);var r=S in e?e[S]():e;a(r.subscribe,"expect observable to have .subscribe");var n=p(),t=Qe(n);return r.subscribe({next:n,error:t,complete:t}),n},r.guard=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var t=s(r),a=t[0],o=a[0],i=a[1],u=t[1];return i||(o=(i=o).source),b(i,"guard"),sr("guard",i.clock,o,i.filter,i.target,null,i.name,u,!i.greedy,0,1)},r.hydrate=function(e,r){var n=r.values;a(te(n),"values property should be an object");var t,o,i,c=w(n),f=Object.getOwnPropertyNames(c),s=[],l=[];q(e)?(i=1,a((t=e).cloneOf,"scope should be created from domain"),o=z(t.cloneOf)):I(e)?o=z(e):a(0,"first argument of hydrate should be domain or scope"),k(o,(function(e,r){F(f,r)&&(E(s,e),E(l,c[r]))})),u({target:s,params:l,scope:t}),i&&Object.assign(t.sidValuesMap,c)},r.is=R,r.launch=u,r.merge=y,r.restore=function(e,r,t){if(N(e))return _(0,"restore($store)"),e;if(C(e)||O(e)){var a=U(e),o=v(r,{parent:a,name:e.shortName,and:t});return Xe(O(e)?e.doneData:e,o),a&&a.hooks.store(o),o}var i=Array.isArray(e)?[]:{};return n(e,(function(e,r){return i[r]=N(e)?e:v(e,{name:r})})),i},r.sample=function(){for(var e,r,n=arguments.length,t=new Array(n),a=0;a<n;a++)t[a]=arguments[a];var o,i,u=s(t),c=u[0],f=c[0],l=c[1],d=c[2],p=u[1],v=1;return oe(l)&&te(f)&&b(f,"sample")&&(l=f.clock,d=f.fn,v=!f.greedy,i=f.filter,e=f.target,r=f.name,o=f.sid,f=f.source),sr("sample",l,f,i,e,d,r,p,v,1,0,o)},r.scopeBind=function(e,r){var n=(void 0===r?{}:r).scope;a(n||Oe,"scopeBind cannot be called outside of forked .watch");var t=n||Oe;return O(e)?function(r){var n=g();return u({target:e,params:{params:r,req:n},scope:t}),n.req}:function(r){return u({target:e,params:r,scope:t}),r}},r.serialize=function(e,r){void 0===r&&(r={});var t=r.ignore?r.ignore.map((function(e){return e.sid})):[],o={};return n(e.sidValuesMap,(function(r,n){if(!F(t,n)){var a=e.sidIdMap[n];o[n]=a&&a in e.reg?e.reg[a].current:r}})),"onlyChanges"in r&&!r.onlyChanges&&(a(e.cloneOf,"scope should be created from domain"),k(z(e.cloneOf),(function(r,n){n in o||F(t,n)||H(r,"isCombine")||"ignore"===H(r,"serialize")||(o[n]=e.getState(r))}))),o},r.setStoreName=function(e,r){e.shortName=r,Object.assign(G(e),f(r,U(e)))},r.split=function(){for(var e,r,t="split",o=arguments.length,u=new Array(o),c=0;c<o;c++)u[c]=arguments[c];var f=s(u),d=f[0],v=d[0],m=d[1],g=f[1],h=!m;h&&(e=v.cases,m=v.match,r=v.clock,v=v.source);var y=N(m),b=!A(m)&&ae(m),k=!y&&!b&&te(m);e||(e={}),h?n(e,(function(e,r){return fe(t,e,"cases."+r)})):(a(k,"match should be an object"),n(m,(function(r,n){return e[n]=p({derived:1,and:g})})),e.__=p({derived:1,and:g}));var w,S=new Set([].concat(v,r||[],Object.values(e))),x=Object.keys(y||b?e:m);if(y||b)y&&S.add(m),w=[y&&be(L(m),0,1),ge({safe:y,filter:1,pure:!y,fn:function(e,r,n){var t=String(y?n.a:m(e));pr(r,F(x,t)?t:"__",e,n)}})];else if(k){var j=Se({});j.type="shape";var M,C=[];n(m,(function(e,r){if(A(e)){M=1,E(C,r),S.add(e);var n=Xe(e,[],[be(j),ye((function(e,n,t){return t.a[r]=e}))]);if(N(e)){j.current[r]=e.getState();var t=L(e);je(j,{from:t,field:r,type:"field"}),l("splitMatchStore",t,n)}}})),M&&l("splitBase",j),w=[M&&be(j,0,1),ke((function(e,r,n){for(var t=0;t<x.length;t++){var a=x[t];if(F(C,a)?n.a[a]:m[a](e))return void pr(r,a,e,n)}pr(r,"__",e,n)}),1)]}else a(0,"expect match to be unit, function or object");var O=i({meta:{op:t},parent:r?[]:v,scope:e,node:w,family:{owners:Array.from(S)},regional:1});if(r&&sr(t,r,v,null,O,null,t,g,0,0,0),!h)return e},r.step=we,r.version="22.2.0",r.withFactory=function(e){var r=e.name,n=e.loc,t=e.method,a=e.fn;return o(i({meta:{sidRoot:ee(e.sid),name:r,loc:n,method:t}}),a)},r.withRegion=o}}]);