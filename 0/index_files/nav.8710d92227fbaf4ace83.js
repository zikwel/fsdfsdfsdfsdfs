(self.webpackChunkvk=self.webpackChunkvk||[]).push([[5411],{79764:function(e,a,t){"use strict";var r,n=t(85863),o=t(71437),i=t(75105),s=t(49265),l=t(40906),d=t(65256),c=t(20848),u=t(94365),_=t(15247),p=t(9458),v=t(34757),f=t(68040),h=t(95415),g=(t(47023),t(99997)),m=t(19228),b=t(62641),w=t(88706),y=t(46153),k=t(70212),S=t(12531),C=t(19331),A=t(88379),E=t(63918),B=t(12449),x=t(29441),T=t(66760),P=t(48658),N=t(7318),R=t(38736);if(!window.ajax){var M={onBeforeRedirect:(0,i.default)("url"),onBeforePageParse:(0,i.default)(),onPostsLoad:(0,i.default)(),onRedirect:(0,c.se)(),onNavDone:(0,i.default)(),_tStart:!1,_tAlStart:!1,RESPONSE_ARGUMENTS:0,RESPONSE_REDIRECT:1,RESPONSE_CAPTCHA:2,RESPONSE_PAGE:3,RESPONSE_FAILED_AUTH:4,RESPONSE_CONFIRM:5,RESPONSE_IGNORE:100,_getreq:function(){return new XMLHttpRequest},_al_reqs:[],_last_req:null,save_req:function(e){M._al_reqs.push(e||M._last_req)},abort_reqs:function(){(0,c.each)(M._al_reqs,(function(e,a){a.abort()})),M._al_reqs=[]},_failed_relogin:!1,_failed_reqs:[],save_failed_req:function(e,a,t,r){M._failed_reqs.push([e,a,t,r])},repeat_reqs:function(){(0,c.each)(M._failed_reqs,(function(){var e=this.shift();M._post.apply(null,this),e&&(0,c.remove)(e)})),M._failed_reqs=[]},_error_displayed:null,plainpost:function(e,a,t,r,o,i,s,l){var d="string"!=typeof a?(0,f.toQueryString)(a,!0):a,u={"Content-Type":"application/x-www-form-urlencoded"};i&&void 0===i.ignoreAbort&&(i.ignoreAbort=!0),o||l||(u["X-Requested-With"]="XMLHttpRequest"),l||((0,p.isStandalone)()&&(u["X-View-Mode"]="pwa"),i&&i.headers&&Object.assign(u,i.headers));var _=new AbortController,v=_.signal,h=new Request(e,{credentials:"same-origin",method:"POST",headers:u,body:d,signal:v}),g=(new Error).stack,m={skip:!1,response:null,text:null,json:null},b=fetch(h).catch((e=>{var a=e&&"AbortError"===e.name,t=!1;if((a&&!i.ignoreAbort||r&&r(e&&e.message,null))&&(t=!0),a&&i.ignoreAbort)return null;if("true"===h.headers.get("X-Ajax-Nav")&&history.back(),!t&&(!M._error_displayed||M._error_displayed<=Date.now()-1e4)){var n=(0,c.getLang)("mobile_general_snackbar_error");navigator.onLine||(n=(0,c.getLang)("mobile_pwa_offline_network_lost")),(0,c.statlogsValueEvent)("mvk_ajax_error_snackbar",Number(navigator.onLine)),Snackbar.init({text:n}),M._error_displayed=Date.now()}throw e.stack=g,e})).then((e=>null===e?(0,n.default)({},m,{skip:!0}):e.text().then((a=>{var o=null;try{o=(0,c.parseJSON)(a)}catch(e){}if(!(e.status>=200&&e.status<300))throw r&&r(a,e),new Error("FailedRequest");return t&&t(a,e),(0,n.default)({},m,{response:e,text:a,json:o})}))));b.catch((()=>{}));var w={request:h,abort:_.abort.bind(_),promise:b};return M._last_req=w,w},post:function(e,a,t){return"/"!=e.substr(0,1)&&(e="/"+e),e=e.split("#")[0],M._post(e,a,t||{})},onPrepared:(0,c.se)(),prepare_click:function(e){var{al:a}=window;if(s.default.ios&&!(s.default.ios>=7)&&window.al&&a.ver){var t=[],r=!1;e&&"a"==(e.tagName||"").toLowerCase()?t.push(e):(0,c.isArray)(e)?t=e:(t=(0,c.geByTag)("a",e),r=!0);for(var n=0,o=t.length;n<o;n++){var i=t[n],l=i&&i.target||"";if(i&&i.getAttribute&&(!r||!i.getAttribute("data-href")&&(0,c.checkElementNav)(i,{skip_onclick:!0})&&"_blank"!=l)){var d=i.getAttribute("href");if(null==d||!(0,c.isHttpHref)(d))continue;(0,c.attr)(i,"data-href",(0,c.getHref)(i)),(0,c.attr)(i,"href",!1)}}}},click:function(e,a,t){var{nav:r}=window;a=a||{};var n,o=!1,i={_ajax:1},s=(0,c.extend)(a,{link:e});if(t=t||{},(t=(0,c.extend)({closeContextMenu:!0},t)).closeContextMenu&&ContextMenu.close(),a.onStart){var l=M.tAlGetParam();M.tAlStart=(new Date).getTime(),l&&(i._talstat=l)}if(t.use_cache){var d=(0,c.ge)(!0===t.use_cache?"preload_data":t.use_cache),u=d.innerHTML.replace(/(^<!--|-->$)/g,""),_=u.split("--\x3e\x3c!--");if(u)d.innerHTML="",a.onStart&&a.onStart.apply(s),t.nav&&r.go(o,null,{push_only:!0}),a.onDone&&a.onDone.apply(s,_),(e=(0,c.geByClass1)("show_more",(0,c.geByClass1)("pcont","mcont")))&&M.click(e,{onDone:function(){var e="";(0,c.each)(arguments,(function(a,t){e+="\x3c!--"+(t||"")+"--\x3e"})),d.innerHTML=e,(0,c.ge)("show_more_loading")&&M.click(!1,a,t),M.onPostsLoad()}},{closeContextMenu:!1});else a.onStart&&a.onStart.apply(s),t.nav&&r.go(o,null,{push_only:!0});return!1}if(!e)return!0;if(e.form){if(e.disabled)return!0;var p=e.form,v={};o=(p.action||"").replace(/^https?:\/\/[^\/]+/i,""),(0,c.each)(p,(function(a,t){return!(t.name&&!t.disabled)||("radio"===t.type&&!t.checked||("checkbox"===t.type&&!t.checked||("button"===t.type||("submit"===t.type&&t!==e||("image"===t.type&&t!==e||void(v[t.name]=t.value))))))})),"image"==e.type&&(v[e.name]=e.value,v[e.name+".x"]=1,v[e.name+".y"]=1),p.method&&"get"!=p.method?(0,c.extend)(i,v):o=o.split("?",1).shift()+(0,c.obj2qs)(v)}else e.getAttribute&&(o=e.getAttribute("data-href")||e.getAttribute("href"));if(o||(o=e.pathname?e.pathname+e.search+e.hash:e),!o)return!0;(0,c.extend)(i,t.url_params||{});var{pStats:f}=window,h=f.getSeenData();if(h){var{cur:g}=window;i._pstat=h.data,g&&g.module&&(i._pstatref=g.module)}return n=M.post(o,i,{onDone:function(){h&&f.onSend(h.seen),t.lock&&(0,c.unlockButton)(e),a.onDone&&a.onDone.apply(s,arguments),(t.nav||t.scroll)&&(0,c.scrollToHash)()},onFail:function(){t.lock&&(0,c.unlockButton)(e),a.onFail&&a.onFail.apply(s,arguments),(t.nav||t.scroll)&&(0,c.scrollToHash)()}}),n&&(a.onStart&&a.onStart.apply(s),t.nav&&r.go(o,null,{push_only:!0}),t.lock&&(0,c.lockButton)(e)),!n},nav:function(e,a){var t,{nav:r}=window,{page:i}=window,{menu:d}=window,{cur:p}=window,{Tabbar:f}=window;(a=a||{}).nav=a.nav||{};var h,A=(0,c.getHref)(e),E=i.getHash(a.nav);if(!(A=r.checkUrl(A)))return!1;"/"!=A.substr(0,1)&&(A="/"+A),d.close(null,!0),M.navStart=(0,x.getTimeFromStart)();var B=M.tGetParam();if(M.tStart=(new Date).getTime(),a.need_restore&&d&&d.closeSearch(),window.isNewMail&&(a.need_restore&&a.nav.push&&!a.need_check_updates&&M.abort_reqs(),r.onBeforeGo2(a.nav.path,Object.assign({},(0,c.qs2obj)(a.nav.params),a.params),a.nav.push,a)))return M.abort_reqs(),!0;if(a.need_restore&&a.nav.push&&(h=i.restore(E))&&(M.abort_reqs(),M._failed_relogin=!1,h.lm&&(0,c.extend)(h.lm,{tn:!1,bn:!1}),i.set(E,h,{restored:!0},a),a.zProcess&&(a.zProcess(h.st),delete a.zProcess),r.set(a),M.tModule=window.cur.module,M.tRestoreRender=(new Date).getTime(),!a.need_check_updates))return!0;var P=!1,N=!1;if(a.need_check_updates&&r.isTabHaveCache(a.tab,E));else if(a.fast)P=!0,i.set(E,!1,{before:!0,beforeAppend:a.beforeAppend,afterAppend:a.afterAppend}),N=a.onAfterFast||!1;else if((a.alMode||(null==(t=a.target)?void 0:t.className))&&!p.ignoreFastNav){var R,L=/(?:^|\s)(al_([a-z_]+)(-?[0-9]+)?)(?:\s|$)/i.exec((null==(R=a.target)?void 0:R.className)||""),q=a.alMode||L&&L[2]||!1;switch(q){case"menu":P=!0,i.set(E,!1,{before:!0,beforeAppend:function(e){var t=(0,o.$)(".vk__page");if(t.className=t.className.replace("vk__page_notifications",""),window.isNewMail){var r=(0,c.geByClass1)("mcont",e)||(0,c.geByClass1)("layout__basis");(0,c.val)(r,'<div class="pcont bl_cont"><div id="al_loading"></div></div>')}else(0,c.val)((0,c.geByClass1)("mcont",e),'<div class="pcont bl_cont"><div id="al_loading"></div></div>');i.setMhead(e,(0,c.attr)(a.target,"data-header"),"/")},afterAppend:function(){window.isNewMail&&"/mail"===E?(0,u.alLoadingFix)((0,c.geByClass1)("layout").offsetHeight):(0,u.alLoadingFix)(),(0,c.scrollTop)(0)}});break;case"tab":P=!0,i.set(E,!1,{before:!0,beforeAppend:function(e){(0,c.val)((0,c.geByClass1)("upanel",e),'<div id="al_loading"></div>'),(0,c.val)((0,c.geByClass1)("basisDefault",e),'<div id="al_loading"></div>');var a=(0,c.geByClass1)("tabs_block",e)||(0,c.geByClass1)("tabs",e),t=(0,c.geByClass1)("active",a);if(t){var r,n=(0,o.$)(".tab_item_cur",a);if(n&&(n.classList.remove("tab_item_cur"),n.removeAttribute("aria-current")),t.classList.contains("tab_item_top"))null==(r=(0,o.$)(".tab_item",a))||r.classList.add("tab_item_cur");else t.classList.add("tab_item_cur"),t.setAttribute("aria-current","page"),t.focus()}},afterAppend:function(){(0,u.alLoadingFix)()}},a);break;case"post":P=!0,i.set(E,!1,{before:!0,beforeAppend:function(e){var{lang:t}=window,r=(0,c.clone)((0,c.gpeByClass)("post_item",a.target)),n=(0,c.geByClass1)("PostPrivacyLabel--friendsOnly",r),o=(0,c.geByClass1)("PostPrivacyLabel--bestFriendsOnly",r),s=n&&n.getAttribute("onclick")||"",l=o&&o.getAttribute("onclick")||"",d=r.id,u=(0,c.outer)((0,c.gpeByTag)("a",(0,c.geByClass1)("pi_img",r))).replace("pi_img","op_img"),_=(0,c.gpeByTag)("div",(0,c.geByClass1)("pi_author",r)),p=(0,c.remove)((0,c.geByClass1)("pi_date",r)),v=(0,c.outer)((0,c.remove)((0,c.geByClass1)("explain",_))),f=(0,c.remove)(n),h=(0,c.remove)(o),g=(0,c.outer)(_),m=(0,c.geByClass1)("pi_body",r),b=(0,c.geByClass1)("pi_text_more",m),w=(p=(0,c.geByClass1)("pi_date",r),(0,c.geByClass1)("pi_info",m)),y=(0,c.geByClass1)("pi_links",m),k=(0,c.geByClass1)("replies_link",y),S=(0,c.val)((0,c.remove)((0,c.geByClass1)("pi_actions_wrap",r))),C=(0,c.val)((0,c.remove)(null==w.querySelector?void 0:w.querySelector(".item_replies, ._item_replies")))?(0,c.val)(k):t.mobile_wall_post_replies_title,A=k?'<a name="comments"></a><h3 class="slim_header">'+(C||"")+'</h3><div id="al_loading"></div>':"";if(b){var E=b.nextSibling?b:b.parentNode;E.nextSibling.style.display="inline",E.style.display="none"}(0,c.val)(y,(0,c.outer)((0,c.geByClass1)("like_wrap",m))),p&&(0,c.attr)(p,"data-date")&&(0,c.val)(p,(0,c.attr)(p,"data-date")),i.setMhead(e,(0,c.attr)(a.target,"data-header"),!0);var B=f||h?Wd.html((0,T.default)({bestFriendsOnly:h,friendsOnly:f,onClick:f?s:l})):"";(0,c.val)((0,c.geByClass1)("mcont",e),function(e,a,t,r,n,o,i,s){return'<div class="pcont bl_cont"><div class="owner_panel">'+(a||"")+'<div class="op_cont">'+(t||"")+'<div class="op_info"><span class="item_date">'+(r||"")+'</span></div></div></div><div id="'+(e||"")+'" class="post_item single_post_item"><div class="pi_cont"><div class="pi_head">'+(n||"")+'</div><div class="pi_body">'+(o||"")+"</div></div>"+(s||"")+"</div>"+(i||"")+"</div>"}(d,u,g,(0,c.val)(p)+B,v,(0,c.val)(m),A,S))},afterAppend:function(e){var t=(0,c.geByTag1)("h3",e);t&&(0,u.alLoadingFix)(a.nav.hash?(0,c.getCh)()-t.offsetHeight:0),a.nav.hash?(0,c.scrollToHash)(a.nav.hash):(0,c.scrollTop)(0)}},a);break;case"wall":P=!0,i.set(E,!1,{before:!0,beforeAppend:function(e){var t;var{lang:r}=window,n=(0,c.clone)((0,c.hasClass)("wall_item",a.target)?a.target:null==(t=a.target)||null==t.closest?void 0:t.closest(".wall_item"))||void 0,o=null==n||null==n.querySelector?void 0:n.querySelector(".wi_buttons, ._wi_buttons"),s=(0,c.remove)(null==o||null==o.querySelector?void 0:o.querySelector(".item_replies, ._item_replies"))||void 0,l=Number((0,c.stripTags)((null==s?void 0:s.getAttribute("data-replies-count"))||"").replace(/\D/g,"")),d=null==n?void 0:n.id,u=(0,c.geByClass1)("wi_body",n),_=(0,c.geByClass1)("item_like",o),p=(0,c.geByClass1)("v_like",_),v=(0,c.geByClass1)("item_share",o),f=(0,c.geByClass1)("v_share",v),h=(0,c.geByClass1)("pi_text_more",u),g=(0,c.geByClass1)("wi_date",n),b=l?(0,c.langNumeric)(l,r.mobile_wall_post_comments):r.mobile_wall_post_replies_title,w=s&&l<50?'<a name="comments"></a><h3 class="slim_header">'+(b||"")+'</h3><div id="al_loading"></div>':"";if(clog("item_replies",s),(0,c.remove)((0,c.geByClass1)("wi_actions_btn",n)),(0,c.remove)((0,c.geByClass1)("post__subscribeBtn",n)),(0,c.remove)((0,c.geByClass1)("post__extraHeader",n)),p?(0,c.val)(p):(0,c.append)((0,c.ce)("span",{className:"v_like"}),_),f?(0,c.val)(f):(0,c.append)((0,c.ce)("span",{className:"v_share"}),v),h){var y=h.nextSibling?h:h.parentNode;y.nextSibling.style.display="inline",y.style.display="none"}g&&(0,c.attr)(g,"data-date")&&(0,c.val)(g,(0,c.attr)(g,"data-date")),i.setMhead(e,(0,c.attr)(a.target,"data-header"),!0);var k=Wd.html((0,m.Separator)({hideOnDesktop:!0})),S="post--withRedesign",C="";n&&(0,c.hasClass)(S,n)&&(C=S),(0,c.val)((0,c.geByClass1)("mcont",e),function(e,a,t,r,n){return'<div class="pcont"><div class="PageBlock">'+e+'<div class="wall_item single_wall_item '+n+'" id="'+(a||"")+'">'+(t||"")+"</div>"+(r||"")+"</div></div>"}(k,d,(0,c.val)(n),w,C)),(0,c.addClass)("vk__page_singlePost",document.body)},afterAppend:function(e){var t=(0,c.geByTag1)("h3",e);t&&(0,u.alLoadingFix)(a.nav.hash?(0,c.getCh)()-t.offsetHeight:0),a.nav.hash?(0,c.scrollToHash)(a.nav.hash):(0,c.scrollTop)(0)}},a);break;case"pinfo":P=!0,i.set(E,!1,{before:!0,beforeAppend:function(e){var{lang:a}=window,t=(0,c.geByClass1)("owner_panel",e),r=(0,c.geByClass1)("pp_img",t),n=(0,c.geByClass1)("op_header",t),o=(0,c.geByClass1)("lvi",n),s=(0,c.geByClass1)("pp_last_activity",t),l=(0,c.ce)("div");(0,c.addClass)("mhi_back",(0,c.geByClass1)("mh_header",e)),(0,c.val)(t,'<img src="'+(0,c.escapeAttr)((0,c.attr)(r,"src")||"")+'" class="op_img"><div class="op_cont"><h2 class="op_header">'+(0,c.stripTags)((0,c.val)(n))+'</h2><div class="pp_online">'+(o?a.mobile_online:(0,c.val)(s))+"</div></div>"),(0,c.val)((0,c.geByClass1)("ipanel",e),"<div>"+(0,c.val)(l)+'</div><div id="al_loading"></div>'),i.setMhead(e,!1,!0)},afterAppend:function(){(0,u.alLoadingFix)(),(0,c.scrollTop)(0,10)}},a);break;case"player":P=!0;var O=(0,c.qs2obj)(a.nav.params).playlist_id;i.set(E,!1,{before:!0,beforeAppend:function(e){var{lang:a,audio:t}=window,r=(t.playlist(),t.playlist_q());i.setMhead(e,a.mobile_menu_player_head_title,!0),(0,c.val)((0,c.geByClass1)("mcont",e),'\n                <div class="pcont audioPage">\n                  <div class="PageBlock">\n                    <div class="audioPage__header">\n                      '+AudioPlaylist.tplPlayerSearch(O)+'\n                    </div>\n                    <div id="au_search_items" class="upanel bl_cont">\n                      <div class="audios_block audios_list _si_container" data-query="'+(0,c.escapeAttr)(r)+'"></div>\n                    </div>\n                  </div>\n                </div>'),(0,c.val)("m",e.innerHTML)}},a),N=function(){var{qsearch:e,audio:t}=window,r=t.playlist(),n="/audio"+(0,c.obj2qs)({act:"player",list:O}),o=[],l={},d=t.getCurrentId();(0,c.each)(r,(function(e,a){a.chartInfo=null,o.push(a.fullId),l[a.fullId]=[a.performer+" "+a.title,a]}));var _=o.indexOf(d),p=_>-1?Math.min(_+10,o.length):50,v=[];e.init({action:n,al_action:n,container:"au_search_items",field:(0,c.ge)("au_search_field"),btn:(0,c.ge)("au_search_btn"),top_items:o,_cache:l,forceRerender:!0,tpl:function(e,a,r,n){var o="";if(a){if(n)return n;o=""==n?'<div class="audios_block audios_list _si_container" data-query="'+(0,c.escapeAttr)(a)+'">'+e+"</div>":'<div class="audios_block audios_list _si_container" data-query="'+(0,c.escapeAttr)(a)+'"><div class="al_loading qs_loading">&nbsp;</div></div>'}else o='<div class="audios_block audios_list _si_container" data-query="'+(0,c.escapeAttr)(t.playlist_q())+'">'+e+"</div>";return Wd.html((0,g.default)({playlist_id:O,inner:Wd.wrap(o)}))},item_tpl:function(e){var{audioplayer:a}=window;return v.push(e),a&&a.getDOMFromAudio(e,!0,this.q,!0)||""},null_tpl:function(e){var{lang:a}=window;return'<div class="service_msg_box">\n                  <div class="service_msg service_msg_null">\n                  '+(e?a.mobile_audio_search_not_found.replace("%s",(0,c.htsc)(e)):a.mobile_audio_no_audio)+"\n                  </div>\n                </div>"},soft_filter:!0,need_invalid_keys:s.default.desktop,top_len:p,global_search:!0,onRendered:function(){window.audio.addToPlaylist(v),(0,u.alLoadingFix)()},al_need:!0,init_offset:0});var f=window.audioplayer.getCurrentElem();if(f){var h=(0,c.getY)(f)+f.offsetHeight/2-(0,c.getCh)()/2;(0,c.scrollTop)(h,100),i.save(E,{html:null,st:(0,c.scrollTop)(),page:(0,c.ge)("m"),state:i.stash(),cur:window.cur,options:a||{}},!1)}};break;case"photo":P=!0,i.set(E,!1,{before:!0,beforeAppend:function(e){f.drawLoader(e);var a=Wd.html((0,k.default)({is_loading:!0}));(0,c.val)((0,c.geByClass1)("mcont",e),a),(0,u.alLoadingFix)(),i.setMhead(e,lang.mobile_photos_photo_title)},afterAppend:function(){(0,u.alLoadingFix)(),(0,c.scrollTop)(0)}},a);break;case"album":P=!0,i.set(E,!1,{before:!0,beforeAppend:function(e){var t;f.drawLoader(e);var r,s=a.target.href,l=/((?:album|tag)(-?\d+)(?:(?:_(\d+))?))/.exec(s);l&&(r=l[1]);var d=r&&(0,b.getState)(r)||{},p=(0,o.$)(".AlbumItemInfo__title",a.target),v=!1;a.target.classList.contains("AlbumItem--empty")&&(v=!0);var h=(0,_.makeUrl)("/"+r,{act:"select_album"}),g=(0,n.default)({},d,{title:d.title||(0,c.val)(p)||lang.mobile_page_title_album,description:Wd.wrap(d.description),is_empty:v,is_owner:l&&(null==(t=window.vk)?void 0:t.id)===+l[2],add_url:h,count:parseInt(a.target.getAttribute("data-count")||0,10)}),m=function(e){return void 0===e&&(e={}),Wd.html((0,w.default)((0,n.default)({},e,{title:Wd.wrap(e.title),is_loading:!e.is_empty||e.count>0})))}(g);(0,c.val)((0,c.geByClass1)("mcont",e),m),(0,u.alLoadingFix)(),i.setMhead(e,g.title,!0,!1,{movable:!0})},afterAppend:function(){(0,w.initAlbumPage)(),(0,u.alLoadingFix)(),(0,c.scrollTop)(0)}});break;case"albums":P=!0,i.set(E,!1,{before:!0,beforeAppend:function(e){f.drawLoader(e);var t=a.target.closest(".AlbumsBlock"),r=[];t&&(r=Array.from((0,o.$$)(".AlbumItem",t)).map((e=>(0,S.getDataFromDOM)(e).album)));var i=function(e){return void 0===e&&(e={}),Wd.html((0,y.default)((0,n.default)({},e,{section:"all"})))}({albums:r});(0,c.val)((0,c.geByClass1)("mcont",e),i),(0,u.alLoadingFix)()},afterAppend:function(){(0,w.initAlbumPage)(),(0,u.alLoadingFix)(),(0,c.scrollTop)(0)}});break;case"u":case"g":case"p":case"e":case"empty":case"artist":case"playlist":P=!0,i.set(E,!1,{before:!0,beforeAppend:function(e){f.drawLoader(e)},afterAppend:function(){(0,u.alLoadingFix)(),(0,c.scrollTop)(0)}},a);break;case"playlists":P=!0,i.set(E,!1,{before:!0,beforeAppend:function(e){f.drawLoader(e)},afterAppend:function(){(0,u.alLoadingFix)(),(0,c.scrollTop)(0)}});break;case"news_subsection":P=!0,i.set(E,!1,{before:!0,beforeAppend:function(e){var a=(0,c.geByClass1)("news_subsections",e);a&&!(0,c.hasClass)("summary_loading",a.firstChild)&&(0,c.before)((0,c.ce)("div",{className:"summary_loading",innerHTML:'<i class="i_loading"></i>'}),a.firstChild)}});break;case"tabbar":P=!0,a.is_fast=!0;var D=!1,H={options:{is_fast:!0,tab:a.tab,prev_tab:a.prev_tab}};a.need_check_updates&&h&&(H=(0,c.extend)(H,h),D=!0),i.set(E,H,{before:!D,beforeAppend:function(e){i.setMhead(e,(0,c.attr)(a.target,"data-header"),!1),f.drawSkeletonLoader(e,a.tab),document.body.classList.contains("vk_tabbar_bottom")&&i.hideHeader(e)},afterAppend:function(){(0,u.alLoadingFix)()}});break;default:var{cur:p}=window,I=!!(0,c.geByClass1)("mhi_logo","mhead");if(P=!0,p.al_fast&&p.al_fast[q])i.set(E,!1,p.al_fast[q](a),a);else if(!I){var F={options:{is_fast:!0,tab:a.tab,removeAfterNextResponse:a.removeAfterNextResponse}};i.set(E,F,{before:!0,afterAppend:function(){(0,u.alLoadingFix)()}})}}}if(a.need_check_updates||M.abort_reqs(),a.local){var j=!0;i.set(E,{},{after:!0,no_scroll:!0,force:!0},!1),N&&N()}else{var z,U=(0,C.partConfigEnabled)("mvk_fix_nav_params")?{}:(0,c.qs2obj)(a.nav.params);(0,c.extend)(U,a.params||{}),window.al&&!window.al.inited?U[d.NEED_MENU_PARAM]=d.FORCE_NEED_MENU:window.al&&window.al.menu||(U[d.NEED_MENU_PARAM]=d.NEED_MENU),B&&(U._tstat=B);var{pStats:G}=window,V=G.getSeenData();V&&(U._pstat=V.data,p&&p.module&&(U._pstatref=p.module)),(null==(z=p)?void 0:z.module)&&(U._ref_module=p.module),a.target&&(0,l.isElement)(a.target)&&(U._ref=domData(a.target,"ref")),U._ref||(U._ref=(r.path||"").substr(1));var W=A.split("#");!U._hash&&W.length>1&&(U._hash="#"+W[1]),(0,v.preloadStaticForNavigation)(A);var $=Object.assign({},a.headers,{"X-Ajax-Nav":"true"});j=M.post(A,U,{onPageDone:function(e,t,r,n,s){M.fastNav=!1;var{cur:l}=window;if(V&&G.onSend(V.seen),M.tProcess=(new Date).getTime(),i.set(E,{title:e,html:t,js:r,lm:n,bc:s,st:a.st||0},{after:P,no_scroll:P,al_transition:!0},!P&&a),a.back){var d=(0,o.$)(".layout");i.setMhead(d,!1,a.back)}M.tModule=l.module,M.tRender=(new Date).getTime(),M.onNavDone()},redirectToLoginPage:a.redirectToLoginPage,headers:$});M.save_req()}return P&&(a.zProcess&&(a.zProcess(),delete a.zProcess),r.set(a),M.tModule=p.module,M.tFastRender=(new Date).getTime(),M.fastNav=!0),j},confirm:function(e){function a(a,t,r,n){return e.apply(this,arguments)}return a.toString=function(){return e.toString()},a}((function(e,a,t,r){return!!confirm(a)&&M.click(e,r,{url_params:{hash:t}})})),_post:function(e,a,t){var r=function(e,a){t.onFail&&t.onFail.call(window,0,e,a)},n=window.debuglogSent?window.debuglogSent(e):-1;return M.plainpost(e,a,(function(o,i){if(!(0,R.processFetchWaf)(i)){if(204===i.status&&i.headers.get("X-AppShell-Fallback")){var s=location.href;return history.replaceState(null,null,(0,_.makeUrl)(location.href,{__appshell_fallback:i.headers.get("X-AppShell-Fallback")})),void location.replace(s)}var l=!1;try{l=(0,c.parseJSON)(o)}catch(a){if(i.headers.get("Content-Type").includes("text/html")||i.getResponseHeader("Content-Type").includes("text/html"))return console.error(a),nav.hard_go(e,null,t);l=!1}!1===l?r():(M.parseResponse(l,e,a,t),M._debugLog(n,l.debugLog))}}),r,null,{headers:t.headers,ignoreAbort:t.ignoreAbort})},_debugLog:function(e,a){window.debuglogGot&&window.debuglogGot(e,a)},parseResponse:function(e,a,t,n){var{al:i}=window,{nav:s}=window,{menu:l}=window,{page:u}=window,_=e.version,p=e.counters,f=e.notifications,g=e.type,{statsMeta:m}=e,b=[],w=window.al&&_!==i.ver,y=a.indexOf("community")>=0,k=!1;if(g!==M.RESPONSE_IGNORE){var S;switch(w?(0,C.partConfigEnabled)("mvk_lazy_static_reload")?g===M.RESPONSE_ARGUMENTS?r||(r=new A.default({id:"mvk_static_manager",element:document,focusElement:window,triggerEvents:"mouseover mousedown keypress touchstart",idleTimeout:6e5,onIdleCb:()=>{(0,C.partConfigEnabled)("apps_skip_lazy_static_reload_mvk")&&window.cur&&("game"===window.cur.module||"mini_app"===window.cur.module)||((0,c.statlogsValueEvent)("mvk_version_reload",1,_,i.ver,"new_idle_reload"),r.stop(),location.reload())}})).start():((0,c.statlogsValueEvent)("mvk_version_reload",1,_,i.ver,"new_force_reload"),k=!0):((0,c.statlogsValueEvent)("mvk_version_reload",1,_,i.ver,"old_force_reload"),k=!0):!window.menu||e.lm_data&&e.lm_data.lm||l.isMenuHasItems()&&((k=!l.refreshCounters(p))&&(0,c.statlogsValueEvent)("mvk_version_reload",1,_,i.ver,"old_force_reload_change_menu"),l.refreshNotifications(f)),void 0===p||!1===p||y||(0,c.setNotify)(p[B.COUNTERS_POS_MESSAGES]),e.lm_data&&e.lm_data.lm&&(p&&(e.lm_data.counters=p),f&&(e.lm_data.notifications=f)),m&&window.vk&&(window.vk.statsMeta=m),g){case M.RESPONSE_ARGUMENTS:if(k)return s.hard_go(s.cur,null,{replace:!0});var x=e.data;if(S=x&&(0,c.isObject)(x[0])&&x[0]._snackbar){var T;if(Snackbar.init(S),2===S.type)return(null==(T=window.Stories)?void 0:T.opened)?void Stories.close():zlayer.opened()?void zlayer.close():void(M.fastNav&&history.back());delete x[0]._snackbar}var R=(0,v.addStaticVersions)(e.static_files||[]);n&&n.onDone&&R.finally((()=>{n.onDone.apply(window,x)})),b.push(R.catch((()=>{})));break;case M.RESPONSE_REDIRECT:var L=e.location;M.onRedirect(!0,L);var q=e.hard,O=e.frame,D=e.clear,H=e.restore,I=e.replace;if(!O&&window.isNewMail&&M.onBeforeRedirect(L))break;if(D&&s.clear(),(S=e._snackbar)&&(Snackbar.init(S),delete e.snackbar),k||q)s.hard_go(L,null,{replace:I});else if(O){(0,h.setDocumentDomain)();var F=L+(-1==L.indexOf("?")?"?":"&")+"__extra=1",j=(0,c.createIframe)({src:F})}else I&&L===s.prev_cur?history.back():s.go(L,null,{ignore_cur_process:!0,need_restore:H,replace:I});break;case M.RESPONSE_CAPTCHA:var z,{location:U,img:G,post:V,key:W}=e;function r(){(0,N.handleCaptchaSuccess)(null),n&&n.onFail?n.onFail(g,U,{location:U,img:G,post:V,key:W}):s.hard_go(U)}n&&isFunction(n.captchaHandler)?z=n.captchaHandler:n&&!1!==n.captchaHandler&&(z=N.handleAjaxCaptcha),z?z(e).then((e=>{var{captcha_key:a}=e;V.captcha_key=a,n||(n={});var t=n.onDone;n.onDone=function(){(0,N.handleCaptchaSuccess)(null),t&&t(...arguments)},M.post(U,V,n)})).catch(r):r();break;case M.RESPONSE_PAGE:var $=e.lm_data;if(u.need_hard_go=k,$&&$.rdr&&window.al&&i.menu&&(0,c.getW)("vk_wrap")>=614){s.go($.rdr,null,{replace:!0});break}cur.share&&"destroy"in cur.share&&cur.share.destroy(),(n=n||{}).onPageDone||(n.onPageDone=function(e,t,r,n,o){s.go(a,null,{push_only:!0}),u.set(u.getHash(s),{title:e,html:t,js:r,lm:n,bc:o})});var X=e.title,Z=e.html,K=e.js,Q=e.body_class,J=e.top_bar,Y=(0,c.ge)("vk_topbar");J&&!Y?(Y=(0,c.ce)("div",{id:"vk_topbar",innerHTML:J}),(0,c.before)(Y,(0,o.$)(".layout"))):(0,c.val)(Y,J),e.env&&e.env.pe&&(window.vk.pe=e.env.pe);var ee=(0,v.addStaticVersions)(e.static_files);ee.then((()=>{n.onPageDone(X,Z,K,$,Q)})),b.push(ee.catch((()=>{})));break;case M.RESPONSE_FAILED_AUTH:if(d.SAKIntegration.isIntegrated)return M.save_failed_req(null,a,t,n),M._failed_relogin||M.SAKRelogin(),void(M._failed_relogin=!0);if(n.redirectToLoginPage)return window.location=e.location,!1;if(!M._failed_relogin){var ae=e.location;(0,h.setDocumentDomain)();j=(0,c.createIframe)({src:ae})}M._failed_relogin=!0,M.save_failed_req(j,a,t,n);break;case M.RESPONSE_CONFIRM:var{data:te}=e;te.useNavigation=!0;var re=(0,E.default)(te),ne=Wd.elem(re);Popup.open(ne,!0);break;case M.RESPONSE_IGNORE:return}Promise.all(b).finally((()=>{(0,P._handleResponseExtraPayloads)(null==e?void 0:e.extra)}))}},onReLoginDone:function(){M.repeat_reqs(),M._failed_relogin=!1},SAKRelogin:()=>d.SAKIntegration.reauth().then((function(e){var{accessToken:a}=void 0===e?{}:e;if(a){var t={_sak_embed_at:a},{promise:r}=M.post("/login?act=sak_relogin",t,{onDone:()=>{M.onReLoginDone()},onFail:()=>{}});return r}})),tGetParam:function(){if(M.tStart&&M.tModule){var e=M.tFastRender-M.tStart,a=M.tRestoreRender-M.tStart,t=M.tProcess-M.tStart,r=M.tRender-M.tProcess,n=["/"==M.tModule.substr(0,1)?M.tModule.substr(1):M.tModule,e,a,t,r];for(var o in n)(!n[o]||n[o]<0)&&(n[o]=0);return M.tStart=!1,n.join(",")}},tAlGetParam:function(){if(M.tAlStart&&M.tAlModule){var e=M.tAlProcess-M.tAlStart,a=M.tAlRender-M.tAlProcess,t=["al_"+("/"==M.tAlModule.substr(0,1)?M.tAlModule.substr(1):M.tAlModule),e,a];for(var r in t)(!t[r]||t[r]<0)&&(t[r]=0);return M.tAlStart=!1,t.join(",")}},refreshLinks:function(e,a){if(e){var t=(0,c.geByClass1)("mmi_fv","lm_cont"),r=t&&(0,c.geByClass1)("lfm_item",t),n=(0,c.geByClass1)("mmi_fv","mfoot"),o=n&&(0,c.geByClass1)("lfm_item",n),i=(0,c.ge)("fv_link"),s=(0,c.ge)("menu_fv_link"),l=(0,c.geBySel1)('link[rel="canonical"]');(0,c.attr)(r,"href",e),(0,c.attr)(o,"href",e),(0,c.attr)(i,"href",e),(0,c.attr)(l,"href",(0,c.attr)((0,c.ge)("mcont"),"data-canonical")),window.nav.prev_fv_link&&(0,c.attr)(s,"href",window.nav.prev_fv_link),window.nav.fv_link=e}if(a){var d=(0,c.geByClass1)("mmi_app","lm_cont"),u=d&&(0,c.geByClass1)("lfm_item",d),_=(0,c.geByClass1)("mmi_app","mfoot"),p=_&&(0,c.geByClass1)("lfm_item",_),v=(0,c.ge)("app_link"),f=!!a&&"return nav.app_go(this, event, '"+(0,c.escapeStr)(a)+"');";(0,c.attr)(u,"onclick",f),(0,c.attr)(p,"onclick",f),(0,c.attr)(v,"onclick",f)}}};window.ajax=M}a.default=window.ajax},12315:function(e,a,t){"use strict";var r=t(71437),n=t(75105),o=t(49265),i=t(20848),s=t(41467),l=t(95415),d=t(92281),c=t(91263),u=t(25781),_=t(19331),p=t(12449),v=t(16426),f=t(24661),h=t(95574),g=t(34757),m=function(){if(window.nav)return window.nav;if(!window.storybook){var e=!(!window.history||!history.pushState),a=se((function(){return h}));onDOMReady((()=>{s.default.setFlag(s.FLAG_SUPPORTS_HISTORY_API,e)}));var t={},h=null,b=[],w=!1;if(e)addEvent(window,"popstate",(function(e){if(window.isNewMail&&m.onPopState())return preventEvent(e),void stopEvent(e);var a=extend({no_push:!0,need_restore:!0});if(e.state&&e.state.nav){var{tab:t,prev_tab:n}=e.state.nav;a=extend(a,{tab:t,prev_tab:n})}cur.share&&cur.share.destroy&&cur.share.destroy();var o=(0,r.$)(".Popup_open");location.href.includes("#pop_")||Popup.close(o),D(location,null,a)}));else{var y=location.hash||"";"#/"==y.substr(0,2)&&q(y.substr(1),null,{replace:!0});var k=function(e){(e=(e||"").substr(1))&&"/"==e.substr(0,1)||(e=location),D(e,null,{no_push:!0,need_restore:!0})};"onhashchange"in window?addEvent(window,"hashchange",(function(){k(location.hash||"")})):(!function e(){var t=location.hash||"";h!==t&&(h=t,a(!0)),setTimeout(e,100)}(),a((function(e){k(e)})))}var S=(location.pathname||"").replace(/^\/+/,"/"),C=location.search||"",A=location.hash||"";return{onBeforeGo:(0,n.default)(),onBeforeGo2:(0,n.default)(),onPopState:(0,n.default)(),onLocalHistoryBack:(0,n.default)(),go:D,al_go:O,app_go:function(e,a,t){if(!t)return!0;if(checkEvent(a))return!0;remove("app_go_frame");var r=getHref(e),n=ce("iframe",{id:"app_go_frame",src:t,onload:function(){remove("app_go_frame"),r&&m.hard_go(r)}},{display:"none"});return window.bodyNode.appendChild(n),!1},hard_go:q,go_after:function(e,a){return!(0,i.ajaxLayoutEnabled)()||(!!checkNav(a.target,{skip_onclick:!0,skip_clicable:!0})||(!1===e||m.go(e,a)||cancelEvent(a),!1))},page_set:function(e,a,t){M(e,a,t)},page_get:function(e,a){return void 0===a&&(a=Tabbar.getCurrentId()),function(e,a){for(var t=T(a),r=t.length-1;r>=0;--r){var n=t[r];if(n.h===e||n.a===e)return n.d}return!1}(e,a)},getCurrentTabCache:P,saveScrollPosition:function(){var e=R();e&&e.d&&(e.d.st=scrollTop())},set:F,checkUrl:L,tryHistoryBack:function(){var e=m.onLocalHistoryBack();if(e)return e;var a=w;return a&&history.go(-a),w=!1,!!a},zInit:function(){var e=qs2obj(m.params);e.z&&H(e.z)},getPostParams:j,cur:S+C+A,path:S,params:C.substr(1),hash:A,clear:()=>{t={},m.initStore(),b=[],Tabbar.setHistory(t)},hasUpdate:function(e,a,t){if(!e||!e.need_check_updates)return!1;var r=a,n=N(T(e.tab),r);if(!n||!t.html)return!1;var o=n.d.lm.check_updates,i=t.lm.check_updates;return!(!o&&!i)&&(i!==o&&{currentCache:n})},needUpdate:function(e,a,t){if(!e||!e.need_check_updates)return!0;var r=a,n=N(T(e.tab),r);if(!n||!t.html)return!0;var o=n.d.lm.check_updates,i=t.lm.check_updates;return!o&&!i||i!==o},updateCurrentPage:function(){var e=R();page.set(e.h,e.d,{forceUpdate:!0})},isTabHaveCache:function(e,a){var t=T(e);return!!t&&!!N(t,a)},getQuery(e){var a=qs2obj(m.params||"");return e?a[e]||null:a},getNotifierScrollTop(){var e=b.find((e=>"/settings?act=notifier"===e.h));return e?e.d.st:null},reload:()=>m.go(m.cur),tryBack(){var e=b.slice(-2)[0];return!!e&&(m.go(e.h,null,{need_restore:!0}),!0)},backToTabHistory(e,a){void 0===a&&(a={});var t=P(),r=t.findIndex((e=>!0===e.current)),n=a.restore||e&&hasClass("al_back",e),o=a.replace||e&&e.classList.contains("mh_back_replace"),i=a.href||attr(e,"href"),s=t[r-1];if(s)return t.splice(r,t.length),m.go(s.h,null,{need_restore:n,replace:o});if(i)return x(Tabbar.getCurrentId()),m.go(i,null,{replace:o});var l=Tabbar.getCurrentId(),d=Tabbar.getDefaultURL(l);return x(l),m.go(d,null,{replace:o})},openInNativeApp:function(e,a,t,r,n){if(void 0===r&&(r=!1),void 0===n&&(n=!1),this._openAppInProgress)return!1;cancelEvent(a);var i={android:"https://vk.cc/android",iphone:"https://vk.cc/iphone"},s=r?t.href:"vk://vk.com"+(ge("vk_wrap").offsetWidth<882&&m.prev_cur?m.prev_cur:m.cur),l=o.default.mi?1500:300;o.default.safari&&(l=10===o.default.ios?1100:o.default.ios>10&&o.default.ios<12?0:o.default.ios>=12&&o.default.ios<13?2800:o.default.ios>=13?1800:300);var d=Date.now(),c=setTimeout((()=>{this._openAppInProgress=!1,Date.now()-d>l+200||!document.hasFocus()||(!n&&t&&t.href?m.hard_go(t.href):m.hard_go(i[e]))}),l),u=()=>{!o.default.safari&&o.default.ios<9&&clearTimeout(c),this._openAppInProgress=!1,removeEvent(window,"blur",u)};if(addEvent(window,"blur",u),o.default.ios){var _=()=>{window.menu&&window.menu.close(),removeEvent(window,"focus",_)};addEvent(window,"focus",_)}else window.menu&&window.menu.close();return this._openAppInProgress=!0,m.hard_go(s),statlogsValueEvent("mvk_open_in_native_link",1,e),!1},initOpenInNativeAppBtn:function(){if(!isVkWebView()){var e=geByClass1("mmi_open_in_app");e&&addClass("supported",e)}},initStore:function(){window.store&&(window.store.tabs=t)},getPageJs(){var e=(0,r.$)("#page_script");return e?e.innerText:b.length&&b[b.length-1].d.js||""},onMenuItemClick(e,a){var t=getW("vk_wrap")>=882?"full_version":"mobile";if(a&&(0,c.recordClick)(a),statlogsValueEvent("mvk_navigation_pages","click","tabbar",e,t),"/wall"===m.cur.substr(0,5)&&"add"===m.getQuery("act")){var n=(0,r.$)("#feed_add_form"),o=qs2obj(n.action.split("?")[1]),i=n.getAttribute("data-hash")||o.hash;i&&post.saveDraft(null,i)}},setFvLink(e){m.fv_link=e}}}function E(){Tabbar.setHistory(t)}function B(e){var{Tabbar:a}=window;if(!a)throw new Error("Tabbar is not defined: "+JSON.stringify(e));if(e.lm&&e.lm.tab&&e.lm.is_tab_page||e.options&&e.options.forceSetCurrent){var t=a.getCurrentId(),r=e.lm&&e.lm.tab||e.options.tab;a.setCurrentId(r),t!==r&&E()}else e.lm&&!e.lm.tab&&(e.lm.tab=a.getCurrentId())}function x(e){t[e]=[]}function T(e){return!!t[e]&&t[e]}function P(){return!!window.Tabbar&&T(Tabbar.getCurrentId())}function N(e,a){var t=(e||[]).filter((e=>e.d===a||e.h===a));return!(!t||!t[0])&&t[0]}function R(){var e=(P()||[]).filter((e=>!0===e.current));return!(!e||!e[0])&&e[0]}function M(e,a,r){var n;a.options&&a.options.is_fast&&a.options.prev_tab?n=T(a.options.prev_tab):(B(a),n=P(),a.lm&&a.lm.is_tab_page&&(n=!1));var o=function(){var e=R();return e&&e.d&&e.d.options&&e.d.options.replaceState}()||function(e){return e&&e.options&&e.options.replacePrevPage}(a),i=!1;if(n){for(var s=-1,l=n.length-1;l>=0;l--)if(n[l].h===e||n[l].a===e){s=l;break}s>-1&&n.splice(s+1,n.length);for(var d=n.length-1;d>=0;d--){var c=n[d];c.h===e||c.a===e?(n[d]={h:e,d:a,a:r,current:!0},i=!0):n[d].current=!1}}if(!i){var u={h:e,d:a,a:r,current:!0};if(n){var _=n[n.length-1],p=_&&_.d&&_.d.options&&_.d.options.removeAfterNextResponse;(o||p)&&n.pop(),n.push(u),n.length>20&&n.shift()}else{var v=Tabbar.getCurrentId(),f=R();if(f&&f.d&&f.d.options&&f.d.options.need_check_updates&&u.d.lm.check_updates){var h=u.d.html,g=f.d.page;u.d.page=g,u.d.newHTML=h}t[v]=[u]}}if(isArray(n)){for(var m=-1,b=n.length-1;b>=0;b--)if(!0===n[b].current){m=b;break}if(m>0){var w=m-1;n[w].h.includes("/like?act=publish")&&function(e,a){e.splice(a,1)}(n,w)}}}function L(e){var a;if(a=/^(https?:)\/\/([^:\/]+)?(?::(\d+))??(\/+\\+)?(.*)$/i.exec(e)){if(a[1]!==location.protocol)return!1;if(a[2]&&!(0,u.isVKSiteHostnameSameSubdomainForNav)(a[2]))return!1;if(a[3]&&a[3]!==location.port)return!1;e=a[5]||""}var t=e.match(/[^\/|\\|\s+]+\/\S+/g);return e=t?t[t.length-1].trim():e}function q(e,a,t){if(checkEvent(a))return!0;if(t&&t.push_only)return!0;if(t&&t.replace)location.replace(e);else if(e){var r=getHref(e);r===location.href.replace(location.origin,"")?location.reload():location.href=r}return!0}function O(e,a,t){cancelEvent(a);var r=getHref(e);if((0,i.ajaxLayoutEnabled)()){if(t&&t.push_only)return!0;if(ajax.nav(r,t))return document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),!0}q(r,a,t)}function D(a,t,r){var n,o,i,s,{Tabbar:c}=window;if(a&&a.href){var p=(0,u.maybeStripVKSiteURLOriginAnySubdomain)(a.href);if(void 0!==typeof p&&/^\/vkui\/([a-zA-Z_]+)/.test(p))return q(p,t,r),!1;if(s=a.href,a.getAttribute&&a.getAttribute("data-change-location-with-post-away")){var f={};return(i=j(a)).post_id&&(f.post=i.post_id,i.ad_data&&(f.post_ad_data=i.ad_data),i.post_click_cc_key&&(f.cc_key=i.post_click_cc_key),s="/away.php?to="+encodeURIComponent(s)+"&"+obj2qs(f).substr(1)),q(s,t,r),!1}}if(a&&a.href&&a.dataset&&a.dataset.setFrom&&(a.href=Url.make(a.href,{from:m.cur})),m.onBeforeGo(a,t,r))return!1;(0,_.partConfigEnabled)("measure_module_navigation_stats_mvk")&&"performance"in window&&window.performance.mark&&window.performance.mark(v.ModuleNavigationStatMarks.mvk.PERF_MARK);var h=r;if(r=extend({no_push:!1,push_only:!1,replace:!1},r),checkEvent(t))return!stopEvent(t);if(!a)return!0;e&&(r.no_push||r.need_restore)&&(w=!1);var g=a,b="",y="",k="";function S(e){return"a"===tag(e)?e:gpeByTag("a",e)}!a.href&&a.getAttribute&&(g=a.getAttribute("data-href"));var C=t&&S(t.target)||a&&a.tagName&&S(a);if(("input"==tag(a)||"button"==tag(a))&&("submit"==a.type||"image"==a.type)&&a.form){if(a.disabled)return!0;var A=a.form,E={},x=A.action||"",T=!1;if(each(A,(function(e,t){return!(t.name&&!t.disabled&&!(0,d.isFieldIgnored)(t))||("radio"===t.type&&!t.checked||("button"===t.type||("submit"===t.type&&t!==a||("image"===t.type&&t!==a||("file"===t.type?(T=!0,!1):"checkbox"===t.type?(E[t.name]=t.checked?1:0,!0):void(E[t.name]=t.value))))))})),"image"==a.type&&(E[a.name]=a.value,E[a.name+".x"]=1,E[a.name+".y"]=1),T||"multipart/form-data"==attr(A,"enctype"))return function(e){var a=ce("iframe");attr(a,"id","upload_iframe"),attr(a,"name","upload_iframe"),attr(a,"width","0"),attr(a,"height","0"),attr(a,"border","0"),attr(a,"style","width:0;height:0;border:none;position:absolute;left:-1000px;"),append(a,e.parentNode),window.frames.upload_iframe.name="upload_iframe",a=ge("upload_iframe");var t=!1;return each(e,(function(e,a){if("submit"===a.type)return t=a,!1})),addEvent(a,"load",(function e(){removeEvent(a,"load",e),setTimeout((function(){remove(a),unlockButton(t)}),2e3)})),(0,l.setDocumentDomain)(),attr(e,"target","upload_iframe"),attr(e,"method","post"),attr(e,"enctype","multipart/form-data"),attr(e,"encoding","multipart/form-data"),append(ce("input",{type:"hidden",id:"__extra",name:"__extra",value:1}),e),e.submit(),setTimeout((()=>{lockButton(t),remove("__extra")})),!1}(A);if(!(g=L(x)))return!0;A.method&&"get"!=A.method?r.params=E:g=g.split("?",1).shift()+obj2qs(E)}if(hasClass("al_need_login",a)&&(r.redirectToLoginPage=!0),"string"!=typeof g){if(!g)return!0;"/"!==(b=(g.pathname||"").replace(/^\/+/,"/")).substr(0,1)&&(b="/"+b),y=g.search.substr(1),k=g.hash,g=b+g.search+k;if(/^(?:%40|@)-?[.a-z0-9_]+-[a-z0-9-]+(?:[\?&]\w+\=[a-z0-9-_]+)*$/.test(b.substr(1))&&window.cur&&window.cur.module){var P=window.cur.module;if("feed"===P)"search"===qs2obj(m.params).section&&(P="feed_search");y+="&ref="+P}}else{var N=g.split("#"),R=N.shift();k=N.length?"#"+N.join("#"):"",b=(R=R.split("?")).shift(),y=R.join("?"),!k&&!y||b||(b=m.path,R||(y=m.params),g=b+(y?"?"+y:"")+k)}var M=qs2obj(y);function D(e,a,t){var r=t&&M[a];return!(!e||r)&&(M[a]=e,!0)}if(D((i=j(C,!!M._post_click_type)).post_id,"_post",!0),D(i.post_click_type,"_post_click_type",!0),M._post_click_type&&(D(i.post_click_mention_id,"_post_click_mention_id",!0),D(i.post_click_cc_key,"_post_click_cc_key",!0),D(i.post_click_url,"_post_click_url",!0),D(i.ad_data,"_post_ad_data",!0)&&D(i.ad_block_unique_id,"_post_ad_block_unique_id")),-1!==location.pathname.indexOf("/groups_catalog")&&0!==g.indexOf("/")&&(g="/"+g),0!==location.pathname.indexOf("/app")&&0===b.indexOf("/app")&&M&&M.act&&"app_r"===M.act)return!!t||(q(a,t,r),!1);if(y=obj2qs(M).substr(1),t&&g&&m.cur&&g.split("#").shift()==m.cur.split("#").shift()&&k&&!r.force&&(scrollToHash(k),r.push_only=!0),r.no_push&&m.cur==g&&!r.force)return!1;if(r.push_only)return F(extend(r,{nav:{push:g,path:b,params:y,hash:k},meta:r.statsMeta,historyState:r.extraState||{}})),!1;if(addClass("active",r.link||a),hasClass("al_back_history",a))return addClass("al_back",r.link||a),removeClass("al_back_history",r.link||a),m.backToTabHistory(r.link||a);if((x||r.isForm)&&(r.removeAfterNextResponse=null==r.removeAfterNextResponse||r.removeAfterNextResponse),a.classList&&(a.classList.contains("al_tab")||a.classList.contains("SliderTabs__tab")||a.classList.contains("Unfold__item_replaceState"))&&(r.replaceState=!0),void 0===(null==h?void 0:h.replace)&&((null==a||null==(n=a.classList)?void 0:n.contains("al_replace"))||(null==a||null==(o=a.dataset)?void 0:o.alReplace))&&(r.replace=!0),hasClass("al_back",a)){var{act:I}=M;window.isNewMail&&"/mail"===location.pathname&&!I||"show"===I&&!geByClass1("messenger")?r.need_restore=!1:r.need_restore=!0}var z=attr(a,"data-tabbar");if(z){var U=c.getCurrentId();U!==z?(z!==c.TAB_ID_MESSAGES&&0===c.getTabCounter(z)&&(r.need_restore=!0),z===c.TAB_ID_FEED&&"/feed"===g&&(r.need_check_updates=!0),r.tab=z,r.prev_tab=U,r.forceSetCurrent=!0):(r.tab=z,r.prev_tab=z,r.replace=!0),B({lm:{tab:z,is_tab_page:!0}})}else if(r.tab)r.native_prev=c.getCurrentId(),r.is_native_back=!0,r.forceSetCurrent=!0,B({lm:{tab:r.tab,is_tab_page:!0}});else{var G=c.getCurrentId();r.tab=G;var V=!(!this||!isString(this.cur))&&this.cur.substr(1);c.TAB_IDS.includes(V)?r.prev_tab=V:r.prev_tab=G}var W=function(e){var{cur:a}=window,{menu:t}=window,r=qs2obj(e.nav.params),n=qs2obj(m.params);if((n.z||r.z)&&n.z!=r.z){if(m.path==e.nav.path){var o=copy(r),i=copy(n);if(delete o.z,delete i.z,(o=obj2qs(o))==(i=obj2qs(i)))return H(r.z,!1,e),F(e),t.close(null,!0),!1}e.zProcess=function(a,t){H(r.z,a,extend({},e,{no_push:!0}),t)}}if(e.onPreNav=function(){e.zProcess&&(e.zProcess(),delete e.zProcess)},!e.ignore_cur_process&&a.processNav&&a.processNav(e))return F(e),t.close(null,!0),!1;return O(e.nav.push,null,e),!1}(extend(r,a.tagName?{target:a}:{},{nav:{push:g,path:b,params:y,hash:k}}));return W||cancelEvent(t),W}function H(e,a,t,r){var n,{photo:o}=window,{zlayer:i}=window,s=qs2obj(m.params);if(e){if(n=p.Z_REGEXES.photo.exec(e)){if(!0===r)return!1;var l=n[1]||"",d=n[2]||"";return o.openInLayer(!1,null,l,d,{no_push:(t||{}).no_push}),i&&!1!==a&&void 0!==a&&(i._st=a),!0}if(n=p.Z_REGEXES.stories.exec(e)){var c,{Stories:u}=window;if(!0===r)return!1;if(!(null==(c=window.Stories)?void 0:c.opened)){var _=n[1]+(n[2]?n[2]:"/"+n[1])+(n[4]?n[4]:"");(0,g.addStatic)(["stories.js"]).then((()=>{window.Stories.init(_)}))}return!0}if(n=p.Z_REGEXES.narratives.exec(e)){var{Stories:v}=window;if(!0===r)return!1;var[,h,b,w,y]=n;return(0,g.addStatic)(["stories.js"]).then((()=>{window.showNarrative(b,w,y,h?"narratives"+b:"",{source:"narrative_link"})})),!0}if(n=p.Z_REGEXES.doc.exec(e))return!0!==r&&(Gif.openPopup(null,null,{raw:n[1]+"_"+n[2],no_push:(t||{}).no_push,hasVideo:!1,hash:n[4]}),i&&!1!==a&&void 0!==a&&(i._st=a),!0);if(n=p.Z_REGEXES.question.exec(e)){if(!0===r)return!1;var k=s.ref||"url",S=s.from;return window.Questions.show(window.vk.id,{ref:k,from:S}),!0}if(n=p.Z_REGEXES.ask_question.exec(e)){if(!0===r)return!1;var C=s.ref||"url",A=s.from,E=Number(n[1]);return E===window.vk.id?window.Questions.show(E,{ref:C,from:A}):window.Questions.ask(E,{ref:C,from:A}),!0}}return!1!==r&&(i&&i.close(),window.Stories&&window.Stories.opened&&window.Stories.close({isPopState:!0,closeAll:!0}),(0,f.toggleLayer)({state:!1,keepZUrl:!r}),!0)}function I(a,t,r){if(void 0===r&&(r=null),e)!function(e,a,t){var{Tabbar:r}=window,n=r.getCurrentId(),o={nav:{tab:a.tab||n,prev_tab:a.prev_tab}};window.isNewMail?a.replace?history.replaceState(extend({},t,o),null,e):history.pushState(extend({},t,o),null,e):a.replace?history.replaceState(o,null,e):history.pushState(o,null,e)}(a,t,r);else{var n="/"==a.substr(0,1)?a:"/"+a,o="#"+n,i=location.pathname+location.search+o;ge("base").href=n,t.replace?location.replace(i):(h=o,location.href=i)}}function F(a){if(!a.no_push&&m.cur!=a.nav.push)try{window.isNewMail?I(a.nav.push,a,a.historyState):I(a.nav.push,a),e&&!a.no_push&&(a.nav_init||a.nav_incr||void 0!==a.nav_set)?(a.nav_init&&(w=0),a.nav_incr&&!1!==w&&w++,void 0!==a.nav_set&&(w=a.nav_set),w>30&&(w=!1)):w=!1}catch(e){return q(a.nav.push,null,a)}m.cur!==a.nav.push&&(m.prev_cur=m.cur,m.prev_fv_link=m.fv_link),m.cur=a.nav.push,m.path=a.nav.path,m.params=a.nav.params,m.hash=a.nav.hash,m.cur&&0!==m.cur.indexOf("/")&&(m.cur="/"+m.cur),m.path&&0!==m.path.indexOf("/")&&(m.path="/"+m.path)}function j(e,a){var t=!(!e||!e.getAttribute),r={};if(!t)return r;var n=e.getAttribute("data-post-id");n&&(r.post_id=n);var o=e.getAttribute("data-post-click-type");o&&(r.post_click_type=o);var i=e.getAttribute("mention_id");i&&(r.post_click_mention_id=i);var s=e.getAttribute("data-post-click-cc-key");s&&(r.post_click_cc_key=s);var l=[e.getAttribute("href"),e.getAttribute("data-href")];if(each(l,(function(e,a){if(a&&"#"!==a)return r.post_click_url=a,!1})),!!o||a){var d=gpeByClass("_ads_block_data_w",e),c=(d=d||gpeByClass("_ads_promoted_post_data_w",e))&&d.getAttribute("data-ad"),u=d&&d.getAttribute("data-ad-block-uid");c&&(r.ad_data=c),u&&(r.ad_block_unique_id=u)}return r}}();onDOMReady((function(){window.storybook||(m.initOpenInNativeAppBtn(),m.initStore())})),window.nav=m,(0,h.tq)().setInteractiveHandler("Menu/item_click",(e=>{var{dataAttrs:a}=e.payload;m.onMenuItemClick(a.logLink,a.type)})),a.default=m},97170:function(e,a,t){"use strict";var r=t(10965),n=t(69977),o=t(52822),i=t(12344),s=t(20848),l=t(4634),d=t(39814),c={onChange:(0,s.se)(),onChanged:(0,s.se)(),onReadyOrChanged:(0,s.se)(),onRestore:(0,s.se)(),fast_load:!1,need_hard_go:!1,getHash:function(e){if("#player"===e.hash)return e.path+e.hash;var a=(0,s.qs2obj)(e.params);return delete a.z,e.path+(0,s.obj2qs)(a)},getAlias:function(e){if(!e)return!1;var a=(e||"").split("?"),t=a[0],r=(0,s.qs2obj)(a[1]);return r.from&&delete r.offset,delete r.from,delete r.z,delete r.ref,Object.keys(r).forEach((e=>{0===e.indexOf("_")&&delete r[e]})),t+(0,s.obj2qs)(r)},set:function(e,a,t,o){void 0===t&&(t={});var{zlayer:l,cur:d,nav:u,menu:_,audioplayer:p}=window,v=$("body.fixed"),f=v?Math.abs(parseInt((0,s.getStyle)(v,"top"),10)):(0,s.scrollTop)(),h=null;if(window.isNewMail){var g=e.split("?");(0,s.toggleClass)("vk__page_mail",window.bodyNode,(0,i.isNewMailPage)(g[0],g[1]))}l.opened()&&(f=l._st);var m=t.forceUpdate&&a.newHTML,b=!m&&u.hasUpdate(o,e,a),w=!!b||u.needUpdate(o,e,a),y=0;if(!t.force&&!b&&w||m?(y=(0,s.scrollTop)(),h=(0,s.remove)("m"),(0,s.each)((0,s.geByClass)("_cntr",h),(function(){(0,s.remove)(this)})),(0,s.each)((0,s.geByClass)("ScrollView",h),(function(){(0,n.unhealScroll)(this)})),(0,s.remove)((0,s.geByClass1)("_cntrs",h))):(0,s.each)((0,s.geByClass)("ScrollView",(0,s.geByClass1)("m")),(function(){(0,n.unhealScroll)(this)})),!t.after&&!c.fast_load){var k=c.getHash(u),S=o||a.options||{};o&&o.is_native_back&&(S.prev_tab=S.native_prev),c.save(k,{html:null,st:f,page:h,state:c.stash(),cur:window.cur,options:S},!0)}if(t.before||c.clear(),(t.before||!t.before&&!t.after)&&(window.lm_qsearch_counter?window.lm_qsearch_counter++:window.lm_qsearch_counter=1),t.before){var C=o&&o.target;c.fast_load=!0,C&&(0,s.addClass)("__al_target",C);var A=h.cloneNode(!0);C&&(0,s.removeClass)("__al_target",C);var E=(0,s.geByClass1)("__al_target",A);(0,s.removeClass)("__al_target",E),t.beforeAppend&&t.beforeAppend(A,E),(0,s.after)(A,"l"),(0,s.scrollTop)(y),d.toggleHeaderSearch&&d.toggleHeaderSearch(!1),t.afterAppend&&t.afterAppend(A),_&&_.clear_hover(),_&&_.closeSearch(),_&&_.enabled(!0)}else{var B,x;o&&o.zProcess&&o.zProcess(0,!0)&&delete o.zProcess;var T=!1;if(o&&u.set(o),c.need_hard_go)return u.hard_go(u.cur,null,{replace:!0});if(!t.force&&!b&&w||m){var P;if(a.title&&(document.title=(0,s.winToUtf)(a.title)),m?((P=ce("div",{className:"layout__basis",id:"m"})).setAttribute("role","main"),(0,s.val)(P,a.newHTML)):(P=a.page)?T=!0:((P=ce("div",{className:"layout__basis",id:"m"})).setAttribute("role","main"),(0,s.val)(P,a.html)),_.opened()){var N=ce("div",{id:"m_helper",onclick:_.close});append(N,P)}(0,s.after)(P,"l")}c.fast_load=!1,thover.clear(),!b&&w&&(a.lm&&_.refresh(a.lm),a.bc&&window.bodyNode&&(window.bodyNode.className=a.bc,window.bodyNode.classList.toggle("_ioff",window.vk.liteMode.enabled)),l.opened(),o&&o.zProcess?o.zProcess(0,!1)&&delete o.zProcess:l.close()),t.force||(T&&(window.qsearch.isCachedPage=!0),a.js&&evalJs(a.js),T&&(window.qsearch.isCachedPage=!1),a.state&&c.stash(a.state),a.cur&&(0,s.extend)(window.cur,a.cur),o&&(a.options=o),post.wallActionsHide(),c.save(e,a));var R=o?o.nav&&o.nav.hash:u.hash;(b||w)&&(b?Tabbar.showUpdateButton(b.currentCache.d.page):a.st||!R?((0,s.scrollTop)(a.st),(0,s.scrollTop)(a.st,10)):R?scrollToHash(R):t.no_scroll&&!t.force?((0,s.scrollTop)(f),(0,s.scrollTop)(f,10)):scrollToHash()),null==(B=window.audioplayer)||B.initAudio(),null==(x=window.AudioMessagePlayer)||x.redrawWaves()}var{Tabs:M}=window;(0,s.onBodyResize)(M.actualizeShowMoreVisibility),M.actualizeShowMoreVisibility(),(0,r.resizePosters)(),c.onChange(!0,o&&o.nav&&o.nav.push),(t.al_transition||t.restored)&&c.onChanged(!0)},save:function(e,a,t){if(e){var{nav:r}=window,n=t?r.page_get(e,a.options.prev_tab):{};n&&r.page_set(e,(0,s.extend)(n,a),c.getAlias(e))}},restore:function(e){var a,{nav:t}=window,r=t.page_get(e);return r||(r=t.page_get(c.getAlias(e))),!(!r||(null==(a=r.cur)?void 0:a.preventRestore))&&(c.onRestore(!0),r)},stash:function(e){var{cur:a}=window;return window.cur&&a.stash&&a.stash(e)||!1},clear:function(){var{cur:e}=window,{zlayer:a}=window,{menu:t}=window,{tooltip:r}=window;(0,s.onBodyScroll)("__clear"),(0,s.onBodyResize)("__clear"),t&&t.initEvents(),a.isReady&&a.initEvents(),r&&r.clear(),window.cur&&e.destroy&&(0,s.each)(e.destroy,(function(){this()})),window.cur={destroy:[]}},hideHeader:function(e){var a=(0,s.geByClass1)("mhead",e);hide(a)},setMhead:function(e,a,t,r,n){void 0===n&&(n={});var i=(0,s.geByClass1)("mhead",e),d=(0,s.geByClass1)("mhb_logo",i),c=(0,s.geByClass1)("mh_header",e),u=!1,{nav:_}=window,p=document.body,v=(0,s.geByClass1)("SliderTabs",i),f=(0,s.geByClass1)("header__right",i),h=(0,s.geByClass1)("header__gear",i);v&&(0,s.remove)(v),f&&(0,s.remove)(f),h&&(0,s.remove)(h),(0,s.removeClass)("vk_header_tabs",p);var g="header__title hb_btn mh_header mhi_back";if(n.movable&&(g+=" header__title--movable header__title--initial-position"),t){!0===t?u=_.path+(_.params?"?"+_.params:""):t&&(u=t),a||(a=(0,s.val)(c)||"&nbsp;");var m=(0,s.geByClass1)("mhb_back",e),b="",w=(0,s.hasClass)("mh_nobr",m)?" mh_nobr":"",y=r?' onclick="'+r+'"':"";if("/"==u)b='<div class="hb_wrap mhb_back'+w+'"'+y+'><h1 class="hb_btn mh_header">'+a+"</h1></div>";else{var k=Wd.html((0,o.default)((0,l.getBackOutline28Icon)()));b='\n        <div class="header__center hb_wrap mhb_back '+w+'">\n          <a class="header__back al_back" href="'+(0,s.escapeAttr)(u)+'" accesskey="0" '+y+">"+k+'</a>\n          <h1 class="'+g+'">\n            <div class="header__text">\n                '+a+"\n            </div>\n          </h1>\n        </div>\n      "}if(i&&d){var S=(0,s.geByClass1)("mhb_notify",e);(0,s.val)(i,(window.al&&window.al.menu?'<a href="/" class="hb_wrap mhb_home" accesskey="*" onclick="return menu.toggle(event);"><div class="hb_btn mhi_home">&nbsp;</div></a>':'<a href="/" class="hb_wrap mhb_home mhb_vkhome" accesskey="*"><div class="hb_btn mhi_home mhi_vkhome">&nbsp;</div></a>')+'<div id="header_msgs" class="hb_wrap mhb_notify'+(!S||(0,s.hasClass)("mhb_no_notify",S)?" mhb_no_notify":"")+'">'+(0,s.val)(S)+"</div>"+b)}else m&&(m.outerHTML=b);var C=$(".header__center");C&&C.classList.toggle("is_unfold",$(".Unfold",C))}else a&&(0,s.val)(c,a)}};window.page=c,onDOMReady((()=>{(0,d.initScrollRestoration)(),c.onReadyOrChanged(!0),c.onChanged((()=>{c.onReadyOrChanged(!0)}))})),a.default=c}}]);